(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var xe,m,jt,Kt,U,rt,Bt,Rt,Wt,De,Pe,ze,se={},Dt=[],In=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ue=Array.isArray;function I(e,t){for(var n in t)e[n]=t[n];return e}function Ge(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Ue(e,t,n){var i,r,o,a={};for(o in t)o=="key"?i=t[o]:o=="ref"?r=t[o]:a[o]=t[o];if(arguments.length>2&&(a.children=arguments.length>3?xe.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)a[o]===void 0&&(a[o]=e.defaultProps[o]);return ge(e,a,i,r,null)}function ge(e,t,n,i,r){var o={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++jt,__i:-1,__u:0};return r==null&&m.vnode!=null&&m.vnode(o),o}function E(e){return e.children}function $(e,t){this.props=e,this.context=t}function D(e,t){if(t==null)return e.__?D(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?D(e):null}function Gt(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Gt(e)}}function ot(e){(!e.__d&&(e.__d=!0)&&U.push(e)&&!ve.__r++||rt!=m.debounceRendering)&&((rt=m.debounceRendering)||Bt)(ve)}function ve(){for(var e,t,n,i,r,o,a,l=1;U.length;)U.length>l&&U.sort(Rt),e=U.shift(),l=U.length,e.__d&&(n=void 0,r=(i=(t=e).__v).__e,o=[],a=[],t.__P&&((n=I({},i)).__v=i.__v+1,m.vnode&&m.vnode(n),Qe(t.__P,n,i,t.__n,t.__P.namespaceURI,32&i.__u?[r]:null,o,r??D(i),!!(32&i.__u),a),n.__v=i.__v,n.__.__k[n.__i]=n,Yt(o,n,a),n.__e!=r&&Gt(n)));ve.__r=0}function Qt(e,t,n,i,r,o,a,l,c,h,d){var u,_,f,A,q,x,v=i&&i.__k||Dt,b=t.length;for(c=On(n,t,v,c,b),u=0;u<b;u++)(f=n.__k[u])!=null&&(_=f.__i==-1?se:v[f.__i]||se,f.__i=u,x=Qe(e,f,_,r,o,a,l,c,h,d),A=f.__e,f.ref&&_.ref!=f.ref&&(_.ref&&Ze(_.ref,null,f),d.push(f.ref,f.__c||A,f)),q==null&&A!=null&&(q=A),4&f.__u||_.__k===f.__k?c=Zt(f,c,e):typeof f.type=="function"&&x!==void 0?c=x:A&&(c=A.nextSibling),f.__u&=-7);return n.__e=q,c}function On(e,t,n,i,r){var o,a,l,c,h,d=n.length,u=d,_=0;for(e.__k=new Array(r),o=0;o<r;o++)(a=t[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(c=o+_,(a=e.__k[o]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?ge(null,a,null,null,null):ue(a)?ge(E,{children:a},null,null,null):a.constructor==null&&a.__b>0?ge(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=e,a.__b=e.__b+1,l=null,(h=a.__i=Pn(a,n,c,u))!=-1&&(u--,(l=n[h])&&(l.__u|=2)),l==null||l.__v==null?(h==-1&&(r>d?_--:r<d&&_++),typeof a.type!="function"&&(a.__u|=4)):h!=c&&(h==c-1?_--:h==c+1?_++:(h>c?_--:_++,a.__u|=4))):e.__k[o]=null;if(u)for(o=0;o<d;o++)(l=n[o])!=null&&(2&l.__u)==0&&(l.__e==i&&(i=D(l)),Xt(l,l));return i}function Zt(e,t,n){var i,r;if(typeof e.type=="function"){for(i=e.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=e,t=Zt(i[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=D(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function be(e,t){return t=t||[],e==null||typeof e=="boolean"||(ue(e)?e.some(function(n){be(n,t)}):t.push(e)),t}function Pn(e,t,n,i){var r,o,a=e.key,l=e.type,c=t[n];if(c===null&&e.key==null||c&&a==c.key&&l==c.type&&(2&c.__u)==0)return n;if(i>(c!=null&&(2&c.__u)==0?1:0))for(r=n-1,o=n+1;r>=0||o<t.length;){if(r>=0){if((c=t[r])&&(2&c.__u)==0&&a==c.key&&l==c.type)return r;r--}if(o<t.length){if((c=t[o])&&(2&c.__u)==0&&a==c.key&&l==c.type)return o;o++}}return-1}function at(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||In.test(t)?n:n+"px"}function pe(e,t,n,i,r){var o,a;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||at(e.style,t,"");if(n)for(t in n)i&&n[t]==i[t]||at(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")o=t!=(t=t.replace(Wt,"$1")),a=t.toLowerCase(),t=a in e||t=="onFocusOut"||t=="onFocusIn"?a.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?i?n.u=i.u:(n.u=De,e.addEventListener(t,o?ze:Pe,o)):e.removeEventListener(t,o?ze:Pe,o);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function st(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=De++;else if(t.t<n.u)return;return n(m.event?m.event(t):t)}}}function Qe(e,t,n,i,r,o,a,l,c,h){var d,u,_,f,A,q,x,v,b,X,O,he,V,it,fe,ee,Ee,L=t.type;if(t.constructor!=null)return null;128&n.__u&&(c=!!(32&n.__u),o=[l=t.__e=n.__e]),(d=m.__b)&&d(t);e:if(typeof L=="function")try{if(v=t.props,b="prototype"in L&&L.prototype.render,X=(d=L.contextType)&&i[d.__c],O=d?X?X.props.value:d.__:i,n.__c?x=(u=t.__c=n.__c).__=u.__E:(b?t.__c=u=new L(v,O):(t.__c=u=new $(v,O),u.constructor=L,u.render=Un),X&&X.sub(u),u.props=v,u.state||(u.state={}),u.context=O,u.__n=i,_=u.__d=!0,u.__h=[],u._sb=[]),b&&u.__s==null&&(u.__s=u.state),b&&L.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=I({},u.__s)),I(u.__s,L.getDerivedStateFromProps(v,u.__s))),f=u.props,A=u.state,u.__v=t,_)b&&L.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),b&&u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(b&&L.getDerivedStateFromProps==null&&v!==f&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(v,O),!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(v,u.__s,O)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(u.props=v,u.state=u.__s,u.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(te){te&&(te.__=t)}),he=0;he<u._sb.length;he++)u.__h.push(u._sb[he]);u._sb=[],u.__h.length&&a.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(v,u.__s,O),b&&u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(f,A,q)})}if(u.context=O,u.props=v,u.__P=e,u.__e=!1,V=m.__r,it=0,b){for(u.state=u.__s,u.__d=!1,V&&V(t),d=u.render(u.props,u.state,u.context),fe=0;fe<u._sb.length;fe++)u.__h.push(u._sb[fe]);u._sb=[]}else do u.__d=!1,V&&V(t),d=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++it<25);u.state=u.__s,u.getChildContext!=null&&(i=I(I({},i),u.getChildContext())),b&&!_&&u.getSnapshotBeforeUpdate!=null&&(q=u.getSnapshotBeforeUpdate(f,A)),ee=d,d!=null&&d.type===E&&d.key==null&&(ee=Jt(d.props.children)),l=Qt(e,ue(ee)?ee:[ee],t,n,i,r,o,a,l,c,h),u.base=t.__e,t.__u&=-161,u.__h.length&&a.push(u),x&&(u.__E=u.__=null)}catch(te){if(t.__v=null,c||o!=null)if(te.then){for(t.__u|=c?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;o[o.indexOf(l)]=null,t.__e=l}else for(Ee=o.length;Ee--;)Ge(o[Ee]);else t.__e=n.__e,t.__k=n.__k;m.__e(te,t,n)}else o==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):l=t.__e=zn(n.__e,t,n,i,r,o,a,c,h);return(d=m.diffed)&&d(t),128&t.__u?void 0:l}function Yt(e,t,n){for(var i=0;i<n.length;i++)Ze(n[i],n[++i],n[++i]);m.__c&&m.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(o){o.call(r)})}catch(o){m.__e(o,r.__v)}})}function Jt(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:ue(e)?e.map(Jt):I({},e)}function zn(e,t,n,i,r,o,a,l,c){var h,d,u,_,f,A,q,x=n.props,v=t.props,b=t.type;if(b=="svg"?r="http://www.w3.org/2000/svg":b=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),o!=null){for(h=0;h<o.length;h++)if((f=o[h])&&"setAttribute"in f==!!b&&(b?f.localName==b:f.nodeType==3)){e=f,o[h]=null;break}}if(e==null){if(b==null)return document.createTextNode(v);e=document.createElementNS(r,b,v.is&&v),l&&(m.__m&&m.__m(t,o),l=!1),o=null}if(b==null)x===v||l&&e.data==v||(e.data=v);else{if(o=o&&xe.call(e.childNodes),x=n.props||se,!l&&o!=null)for(x={},h=0;h<e.attributes.length;h++)x[(f=e.attributes[h]).name]=f.value;for(h in x)if(f=x[h],h!="children"){if(h=="dangerouslySetInnerHTML")u=f;else if(!(h in v)){if(h=="value"&&"defaultValue"in v||h=="checked"&&"defaultChecked"in v)continue;pe(e,h,null,f,r)}}for(h in v)f=v[h],h=="children"?_=f:h=="dangerouslySetInnerHTML"?d=f:h=="value"?A=f:h=="checked"?q=f:l&&typeof f!="function"||x[h]===f||pe(e,h,f,x[h],r);if(d)l||u&&(d.__html==u.__html||d.__html==e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(u&&(e.innerHTML=""),Qt(t.type=="template"?e.content:e,ue(_)?_:[_],t,n,i,b=="foreignObject"?"http://www.w3.org/1999/xhtml":r,o,a,o?o[0]:n.__k&&D(n,0),l,c),o!=null)for(h=o.length;h--;)Ge(o[h]);l||(h="value",b=="progress"&&A==null?e.removeAttribute("value"):A!=null&&(A!==e[h]||b=="progress"&&!A||b=="option"&&A!=x[h])&&pe(e,h,A,x[h],r),h="checked",q!=null&&q!=e[h]&&pe(e,h,q,x[h],r))}return e}function Ze(e,t,n){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&t==null||(e.__u=e(t))}else e.current=t}catch(r){m.__e(r,n)}}function Xt(e,t,n){var i,r;if(m.unmount&&m.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||Ze(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){m.__e(o,t)}i.base=i.__P=null}if(i=e.__k)for(r=0;r<i.length;r++)i[r]&&Xt(i[r],t,n||typeof e.type!="function");n||Ge(e.__e),e.__c=e.__=e.__e=void 0}function Un(e,t,n){return this.constructor(e,n)}function jn(e,t,n){var i,r,o,a;t==document&&(t=document.documentElement),m.__&&m.__(e,t),r=(i=!1)?null:t.__k,o=[],a=[],Qe(t,e=t.__k=Ue(E,null,[e]),r||se,se,t.namespaceURI,r?null:t.firstChild?xe.call(t.childNodes):null,o,r?r.__e:t.firstChild,i,a),Yt(o,e,a)}xe=Dt.slice,m={__e:function(e,t,n,i){for(var r,o,a;t=t.__;)if((r=t.__c)&&!r.__)try{if((o=r.constructor)&&o.getDerivedStateFromError!=null&&(r.setState(o.getDerivedStateFromError(e)),a=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,i||{}),a=r.__d),a)return r.__E=r}catch(l){e=l}throw e}},jt=0,Kt=function(e){return e!=null&&e.constructor==null},$.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=I({},this.state),typeof e=="function"&&(e=e(I({},n),this.props)),e&&I(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),ot(this))},$.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ot(this))},$.prototype.render=E,U=[],Bt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Rt=function(e,t){return e.__v.__b-t.__v.__b},ve.__r=0,Wt=/(PointerCapture)$|Capture$/i,De=0,Pe=st(!1),ze=st(!0);var Kn=0;function s(e,t,n,i,r,o){t||(t={});var a,l,c=t;if("ref"in c)for(l in c={},t)l=="ref"?a=t[l]:c[l]=t[l];var h={type:e,props:c,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Kn,__i:-1,__u:0,__source:r,__self:o};if(typeof e=="function"&&(a=e.defaultProps))for(l in a)c[l]===void 0&&(c[l]=a[l]);return m.vnode&&m.vnode(h),h}var M=(e=>(e[e.H14_Wide=0]="H14_Wide",e[e.H14_Traditional=1]="H14_Traditional",e[e.H13_Wide=2]="H13_Wide",e[e.H13_MidShift=3]="H13_MidShift",e[e.H12=4]="H12",e))(M||{}),F=(e=>(e[e.ANSI=0]="ANSI",e[e.Ortho=1]="Ortho",e[e.Harmonic=2]="Harmonic",e))(F||{}),p=(e=>(e[e.Number=0]="Number",e[e.Upper=1]="Upper",e[e.Home=2]="Home",e[e.Lower=3]="Lower",e[e.Bottom=4]="Bottom",e))(p||{}),w=(e=>(e[e.LayoutKeyEffort=0]="LayoutKeyEffort",e[e.LayoutFingering=1]="LayoutFingering",e[e.LayoutAngle=2]="LayoutAngle",e[e.MappingDiff=3]="MappingDiff",e[e.MappingFrequeny=4]="MappingFrequeny",e[e.MappingBigrams=5]="MappingBigrams",e[e.MappingAltGr=6]="MappingAltGr",e))(w||{});const Bn=e=>[0,1,2].includes(e);var H=(e=>(e[e.LPinky=0]="LPinky",e[e.LRing=1]="LRing",e[e.LMiddle=2]="LMiddle",e[e.LIndex=3]="LIndex",e[e.LThumb=4]="LThumb",e[e.RThumb=5]="RThumb",e[e.RIndex=6]="RIndex",e[e.RMiddle=7]="RMiddle",e[e.RRing=8]="RRing",e[e.RPinky=9]="RPinky",e))(H||{});const we=e=>Math.floor(e/5),lt=e=>e==5||e==4,je=.2,ct=1,ut=1.5,ht=2,Ke=3;var S=(e=>(e[e.SamePosition=0]="SamePosition",e[e.SameFinger=1]="SameFinger",e[e.SameHand=2]="SameHand",e[e.SwapHands=3]="SwapHands",e))(S||{});const Q=[1,.5,0,-.5];var g=(e=>(e[e.OtherHand=0]="OtherHand",e[e.InvolvesThumb=1]="InvolvesThumb",e[e.SameFinger=2]="SameFinger",e[e.AltFinger=3]="AltFinger",e[e.OppositeLateral=4]="OppositeLateral",e[e.SameRow=5]="SameRow",e[e.NeighboringRow=6]="NeighboringRow",e[e.OppositeRow=7]="OppositeRow",e))(g||{});const Ye=[0,0,4,1,2,0,0,2],le={E:127,T:91,A:82,O:75,I:70,N:67,S:63,H:61,R:60,D:43,L:40,C:28,U:28,M:24,W:24,F:22,G:20,Y:20,P:19,B:15,",":10,".":10,V:9.8,K:7.7,"-":5,"'":2,J:1.5,X:1.5,Q:1,Z:.7},Ce={name:"Qwerty – US and world-wide standard",techName:"QWERTY",description:`This ancient typewriter-born key mapping is so ubiquitous today that many people might never have seen 
    a different mapping in their whole life. At the same time it is also extra-ordinary bad for touch-typing, 
    because frequently used letters are not in the center. `,sourceUrl:"https://en.wikipedia.org/wiki/QWERTY",mapping30:["qwertyuiop","asdfghjkl;","zxcvbnm,./"]},Rn={name:"Qwerty Wide",description:`Small changes to Qwerty for a wide hand position. 
    It's actually a gateway drug to more layout changes, because it makes it feel good to have N on a home key 
    and weird to not have more frequent letters there, too.
    I think that the next step would logically be Qwipper or flip/spin or Cozy, Thumby, Colemak.`,mappingAnsiWide:["[=","qwert]yuiop-\\","asdfg;jnkl'","zxcvb/hm,.","⌥≡"],mapping30:["qwertyuiop","asdfgjnkl;","zxcvbhm,./"]},Vt={name:"Colemak",description:"Released in the year 2006, the Colemak layout started a new world-wide interest in better letter mappings. It also pioneered the idea of leaving some crucial-for-shortcuts keys in their place. Colemak places a strong emphasis on avoiding single-finger bigram conflicts at the cost of many letters changing fingers. ",sourceUrl:"https://colemak.com/",mapping30:["qwfpgjluy;","arstdhneio","zxcvbkm,./"],mappingAnsiWide:["=-","qwfpg[jluy;'\\","arstd]hneio","zxcvb/km,.","⌥≡"]},Wn={name:"Colemak DH",description:'A 2014 variant of Colemak that places the letters D and H in better positions. Apparently the original Colemak assumed that the "home row" is the easiest to type in any position, but actually fingers move up and down more easily than left and right. Thus Colemak-DH puts less frequently used keys in the center column. (Note that the Colemak-DH authors prefer the ISO keyboard to achieve better staggering in the bottom row. That idea is valid, but the resulting tiny and much further away shift key is a no-go for me. Shown here is the version for the ANSI keyboard which additionally moves Z to the middle column.) ',sourceUrl:"https://colemakmods.github.io/mod-dh/",mapping30:["qwfpbjluy;","arstgmneio","xcdvzkh,./"],mappingAnsiWide:["=-","qwfpb[jluy;'\\","arstg]mneio","xcdvz/kh,.","⌥≡"],mappingSplitOrtho:["","qwfpbjluy;-","arstgmneio'","zxcdvkh,./","⇤\\=⇥"]},Dn={name:"Colemak Thumby D - The best.",description:"Colemak with E on the thumb key and D taking E's home position. I like this variant the most, because it combines low typing effort with the lowest diff to Qwerty. (It' s fun to see how it undoes a lot of the shuffling which Colemak-DH introduced.) ",sourceUrl:"https://colemak.com/",mappingThumb30:["qwfpgjluy;","arst-mndio","zxcvbkh,.","e"]},Gn={name:"Colemak Thumby H",description:`Slightly modified version of Colemak-DH that places E on the thumb key and H on an actual home key. 
    Unlike Thumby Zero, there is no need to rescue the letter from "the worst position of the board", 
    because Colemak already places a very rare letter there. 
    Note that this slightly beats Colemak Thumby D on staggered keyboards where the left-bottom conflicts can be alt-fingered,
    but it's noticeably worse on Ortho boards. And all that for having more changes to Qwerty.
    TODO: make a custom version of this for the Harmonic 13 MidShift, because that's the only board to properly represent the angle mod. 
    And a custom version for ortho, same reason.`,mappingThumb30:["qwfpbjluy;","arstg-nhio","xcdvzkm,.","e"]},Qn={name:"Colemak Thumby N",description:`Slightly modified version of Colemak-DH that places E on the thumb key and H on an actual home key. 
    Since N is more frequent than H, we move N to the middle finger where it causes less bigram conflicts.  
    TODO: make a custom version of this for the Harmonic 13 MidShift, because that's the only board to properly represent the angle mod. 
    And a custom version for ortho, same reason.`,mappingThumb30:["qwfpbjlyu;","arstg-hnio","xcdvzkm,.","e"]},Zn={name:"Colemak Thumby L",description:"Just a test to compare metrics. Turns out that moving L to the home row does not cause less bigram conflicts. ",mappingThumb30:["qwfpbj-uy;","arstgmnlio","xcdvzkh,.","e"]},Yn={name:"Norman",sourceUrl:"https://normanlayout.info/index.html",description:"Norman has the heaviest focus on minimizing finger movement among all the mappings in this comparison. However, at the time of its creation, the notion of minimizing learning effort was still new and Norman did a great job of balancing the two. One could apply the Minimak principle of step-wise learning to Norman by starting with the pair-swaps DE and LO, then adding the ring-swap FTKRI, and finally the ring swap NJPYH;",mapping30:["qwdfkjurl;","asetgynioh","zxcvbpm,./"]},Jn={name:"Minimak 4-key",techName:"Minimak-4",sourceUrl:"https://github.com/binaryphile/www.minimak.org/blob/master/media/minimak_4_key.png",sourceLinkTitle:"GitHub: binaryphile/www.minimak.org",description:"Minimak partitions its key remapping in three steps, so that you can learn the layout incrementally. Thanks to the many same-finger changes this trick actually works with all of the layouts in this app, but Minimak get credit for making it explicit.",mapping30:["qwdrkyuiop","astfghjel;","zxcvbnm,./"]},Xn={...Jn,name:"Minimak Full (12-key)",techName:"Minimak-12",sourceUrl:"https://github.com/binaryphile/www.minimak.org/blob/master/media/minimak.png",mapping30:["qwdfkyuil;","astrghneop","zxcvbjm,./"]},Vn={name:"Qwerty Flip/Twist",techName:"Qwerty-FlipTwist",sourceUrl:"https://nick-gravgaard.com/qwerty-flip/",description:"The genius mapping that anyone can remember after seeing it only one time. Absolutely minimal learning; much better typing than Qwerty; and anyone can still use your relabled keyboard, because flipped keys are so close to where people look for them. ",mapping30:["qwdfgyukl;","aserthniop","zxcvbjm,./"]},ei={name:"Qwerty Flip/Twist/Spin",techName:"Qwerty-FlipTwistSpin",sourceUrl:"https://nick-gravgaard.com/qwerty-flip/",description:"A nice spin on the Flip/Twist mapping which improves typing a bit more.",mapping30:["qwdfgyukp;","aserthniol","zxcvbjm,./"]},ti={name:"Quipper aka Qwpr",techName:"Qwpr",sourceUrl:"https://sourceforge.net/p/qwpr/wiki/Home/",description:"By placing 'e' on the right pinky, this mapping avoids a lot of bigram conflicts, since no other letter is on that finger. ",mapping30:["qwprfyukl;","asdtghnioe","zxcvbjm,./"]},en={name:"Thumby Nine",description:'Puts the nine most frequent letters of English into home key positions, keeping most of them on the same finger. When using the "ANSI wide" home position, you suddenly realize how easy it becomes for your thumb to hit the key to the right of the space bar. Thus is born the idea of adding a ninth home key, which changes everything. Notably it leads to a ring swap EDRFTB at the end of which one more character can be inserted onto the main area of the keyboard. Note that R shows as a changed finger, but probably most people already type R with their middle finger when typing the RT bigram on Qwerty. The remaining swaps in the layout are the same as in other casual mappings. With its few differences to Norman, it could be a great upgrade for anyone currently using Norman. We could even call it "Norman-Nine". ',mappingThumb30:["qwdfbyuklp","asrtg-nioh","zxcv;jm,.","e"],mappingAnsiWide:["=\\","qwdfb-yuklp'","asrtg/;nioh","zxcv[]jm,.","e⌥"],mappingSplitOrtho:["","qwdfbyuklp=","asrtg-nioh'","zxcv;jm,./","⇤\\e⇥"],mappingHarmonic13wide:["[]","wdfb-=uklp","qasrtg;jnioh'","zxcv\\/ym,.","`e"],mappingHarmonic14t:["`","qwdfb-=uklp'\\","asrtg;jnioh","zxcv[]ym,.","/e⌥≡"]},ni={name:"Thumby Left",description:`This is Thumby Nine, but the left thumb types the letter E. 
    On the ancient ANSI keyboard, it's weird to use the space bar for a letter, 
    but on any modern Ortholinear or harmonically staggered keyboard, left and right are equally usable. 
    And Thumby Left uses this symmetry to provide a highly performant layout where all the letters 
    are on the same hand as in Qwerty. 
    (Unlike shown on the keyboard above, the space bar should be on the other thumb.) `,mappingSplitOrtho:["","qwdfbyuklp-","asrtg=nioh'","zxcv;jm,./","⇤e\\⇥"],mappingHarmonic13wide:["[]","wdfb-=uklp","qasrtg;jnioh'","zxcv\\/ym,.","e`"]},ii={name:"Thumby Nine-T",description:"Swapping the order of RT (from Qwerty) to TR improves the RD and RT bigrams, but brings new problems with RF, RB, RG, and CT.",mappingThumb30:["qwdfbykulp","astrg-nioh","zxcv;jm,.","e"]},ri={name:"Thumby Nine-U",description:"Instead of swapping UK to improve the UN bigram, we swap UY. This is a same-finger swap generally, but allows alt-fingering the UN bigram. ",mappingThumb30:["qwdfbuyklp","asrtg-nioh","zxcv;jm,.","e"]},oi={name:"Thumby Nine-KU",description:"Adding the K-U swap to Thumby Nine not only makes the relatively frequent U easier to type, but also removes the same-finger conflict of the UN bigram and the KI bigram. ",mappingThumb30:["qwdfbykulp","asrtg;nioh","zxcv-jm,.","e"],mappingAnsiWide:["[`","qwdfb]ykulp'\\","asrtg=;nioh","zxcv-/jm,.","e⌥"],mappingHarmonic13wide:["⇞⇟","wdfb-=kulp","qasrtg;ynioh'","zxcv⇤⇥jm,.","/e"],mappingHarmonic14t:["=","qwdfb-'kulp⇞⇟","asrtg;jnioh","zxcv⇤⇥ym,.","/e⌥≡"],mappingSplitOrtho:["","qwdfbykulp-","asrtg;nioh'","zxcv=jm,./","⇤\\e⇥"]},ai={name:"Thumby Nine-RST",description:"Thumby's DR conflict is especially painful for Qwerty users, so we sacrifice the otherwise unchanged position of S to improve this. (And yep, somewhat ironically, we obtain Colemak' s left-hand home row.) ",mappingThumb30:["qwdfbykulp","arstg;nioh","zxcv-jm,.","e"]},si={name:"Thumby Nine-KU-L",description:"One more finger swap to remove the strong ol/lo bigram conflict. I wouldn't want to actually use this, so it's just there to show the improvement in bigram scores. ",mappingThumb30:["qwdfbyku-p","asrtglnioh","zxcv;jm,.","e"]},li={name:"Thumby Bilingual",description:"German and English have very similar letter frequencies. I am writing a lot in both languages, and so I optimized for both. The result is Thumby Nine, but without the OL swap. Since L in German is much more frequent than O, we can just leave both in the Qwerty position and there by make it easier to learn and switch. ",mappingThumb30:["qwdfbzkuop","asrtg-nilh","yxcv;jm,.","e"]},ci={name:"The Cozy Keyboard",description:`Since D is almost as frequent as H, this layout minimizes the difference to Qwerty, 
        by keeping D on the home row. It has several disadvantages compared with Thumby Bilingual: 
        first, it breaks apart the frequent RT bigram that Qwerty users roll all the time. 
        Second, it keeps H in worse position than D gets in Thumby.
        And third, T has to move hands, which is a bigger learning effort than D moving up on the same finger. `,mappingThumb30:["qwbf;ykulp","asdrghniot","zxcv-jm,.","e"]},tn=[Ce,Rn,Vt,Wn,Dn,Gn,Zn,Qn,Yn,Xn,Vn,ei,ti,ci,en,ni,oi,ai,ri,si,ii,li],ui=15,ft=[1,1.5,1.75,2.25],j={name:"ANSI / Typewriter",description:`The ANSI keyboard layout is based on a typewriter keyboard from the 19th century which gradually evolved to add some computer-specific keys like Ctrl, Alt, and most importantly the @ sign. This layout has keys of widely varying widths and an awkward stagger of 0.5, 0.25, and again 0.25 between the rows. This curiosity still dates back to old typewriter days when each key's middle needed to have a non-intersecting lever underneath to operate its type element. To make this ancient layout a bit more user-friendly, some smart people have come up with the "wide key mapping" variant, which moves the right hand's home position by one key to the right. Most keys move together with this hand position so that muscle memory is strongly preserved. While it might look very unusual, it actually is very easy to get used to. And this setup makes it easier to switch between a laptop and an ergonomic split keyboard. `,thirtyKeyMapping:[["`~","1","2","3","4","5","6","7","8","9","0","-","=","⌫"],["↹",0,1,2,3,4,5,6,7,8,9,"[","]","\\"],["CAPS",0,1,2,3,4,5,6,7,8,9,"'","⏎"],["⇧",0,1,2,3,4,5,6,7,8,9,"⇧"],["Ctrl","Cmd","Alt","⍽","AltGr","Menu","Fn","Ctrl"]],thumb30KeyMapping:[["Esc","1","2","3","4","5","6","7","8","9","0","=","`~","⌫"],["↹",0,1,2,3,4,5,6,7,8,9,"[","]","\\"],["CAPS",0,1,2,3,4,5,6,7,8,9,"'","⏎"],["⇧",0,1,2,3,4,5,6,7,8,"/","⇧"],["Ctrl","Cmd","Alt","⍽",0,"AltGr","Fn","Ctrl"]],fullMapping:[["`~","1","2","3","4","5","6","7","8","9","0",0,1,"⌫"],["↹",0,1,2,3,4,5,6,7,8,9,10,11,12],["CAPS",0,1,2,3,4,5,6,7,8,9,10,"⏎"],["⇧",0,1,2,3,4,5,6,7,8,9,"⇧"],["Ctrl","Cmd","Alt","⍽",0,1,"Fn","Ctrl"]],mainFingerAssignment:[[1,1,1,2,2,3,3,6,6,7,8,8,8,8],[1,0,1,2,3,3,6,6,7,8,9,9,8,8],[0,0,1,2,3,3,6,6,7,8,9,9,9],[0,0,1,2,3,3,6,6,7,8,9,9],[0,0,1,5,7,8,9,9]],hasAltFinger:(e,t)=>e==p.Lower&&[1,2,3,7,8,9].includes(t),singleKeyEffort:[[3,3,2,2,3,3,3,3,2,2,3,3,3,NaN],[NaN,2,1,1,1.5,1.5,1.5,1.5,1,1,2,2,3,3],[NaN,.2,.2,.2,.2,2,2,.2,.2,.2,.2,1.5,2],[NaN,2,2,1.5,1.5,3,1.5,1,1.5,1.5,1.5,NaN],[NaN,NaN,NaN,.2,1.5,NaN,NaN,NaN]],rowStart:e=>0,keyWidth:(e,t)=>{if(e==p.Bottom)return t==3?6.25:1.25;if(t==0)return ft[e];const n=j.thirtyKeyMapping[e].length;if(t==n-1){const i=n-2;return ui-i-ft[e]}return 1},splitColumns:[7,6,6,6,4],leftHomeIndex:4,rightHomeIndex:7,staggerOffsets:[-.75,-.25,0,.5],getSpecificMapping:e=>e.mappingAnsi},hi={...j,name:"ANSI with wide hand position",rightHomeIndex:8,thirtyKeyMapping:[["`~","1","2","3","4","5","6","=","7","8","9","0","-","⌫"],["↹",0,1,2,3,4,"[",5,6,7,8,9,"'","\\"],["CAPS",0,1,2,3,4,"]",5,6,7,8,9,"⏎"],["⇧",0,1,2,3,4,9,5,6,7,8,"⇧"],["Ctrl","Cmd","Alt","⍽","AltGr","Menu","Fn","Ctrl"]],thumb30KeyMapping:[["Esc","1","2","3","4","5","6","`~","7","8","9","0","=","⌫"],["↹",0,1,2,3,4,"[",5,6,7,8,9,"'","\\"],["CAPS",0,1,2,3,4,"]",5,6,7,8,9,"⏎"],["⇧",0,1,2,3,4,"/",5,6,7,8,"⇧"],["Ctrl","Cmd","Alt","⍽",0,"AltGr","Fn","Ctrl"]],fullMapping:[["`~","1","2","3","4","5","6",0,"7","8","9","0",1,"⌫"],...j.fullMapping.slice(1)],mainFingerAssignment:[[1,1,1,2,2,3,3,6,6,6,7,8,8,8],[1,0,1,2,3,3,3,6,6,7,8,9,9,8],[0,0,1,2,3,3,6,6,6,7,8,9,9],[0,0,1,2,3,3,6,6,6,7,8,9],[0,0,1,5,5,8,9,9]],hasAltFinger:(e,t)=>e==p.Lower&&[1,2,3,8,9,10].includes(t),singleKeyEffort:fi(pi(j.singleKeyEffort,j.splitColumns)),getSpecificMapping:e=>e.mappingAnsiWide};function fi(e){return j.splitColumns.forEach((t,n)=>{n!=p.Bottom&&(e[n][t]=Ke)}),e[p.Bottom][4]=je,e}function pi(e,t){const n=[5,7,5,4];return e.map((i,r)=>{if(!n[r])return[...i];const o=t[r]+n[r];return[i.slice(0,t[r]),i[o],i.slice(t[r],o),i.slice(o+1)].flat()})}const di=e=>{const n=ne(e.mainFingerAssignment,p.Bottom,3);return n[p.Bottom][3]=H.LThumb,e.name.includes("wide")&&(n[p.Upper][6]=H.RIndex),{...e,fullMapping:e.fullMapping&&ne(e.fullMapping,p.Bottom,3),thirtyKeyMapping:e.thirtyKeyMapping&&ne(e.thirtyKeyMapping,p.Bottom,3),thumb30KeyMapping:e.thumb30KeyMapping&&ne(e.thumb30KeyMapping,p.Bottom,3),singleKeyEffort:ne(e.singleKeyEffort,p.Bottom,3),keyWidth:(i,r)=>i!=p.Bottom||r<3||r>4?e.keyWidth(i,r):e.keyWidth(i,3)/2,mainFingerAssignment:n}};function ne(e,t,n){const i=e[t];return[...e.slice(0,t).map(r=>[...r]),[...i.slice(0,n),i[n],i[n],...i.slice(n+1)]]}const Be={name:"Ortholinear",description:"Ortholinear keyboards remove the weird row stagger and usually also use uniform key sizes. Those are just as easy to use, but save a lot of space and also allow for easy changing of the key mapping. The layout shown here corresponds to the Preonic, one of several similar available designs. ",thirtyKeyMapping:[["Esc","1","2","3","4","5","6","7","8","9","0","⌫"],["↹",0,1,2,3,4,5,6,7,8,9,"'"],["CAPS",0,1,2,3,4,5,6,7,8,9,"⏎"],["⇧",0,1,2,3,4,5,6,7,8,9,"⇧"],["Ctrl","Cmd","`","-","Alt","⍽","AltGr","=","\\","Fn","Ctrl"]],thumb30KeyMapping:[["Esc","1","2","3","4","5","6","7","8","9","0","⌫"],["↹",0,1,2,3,4,5,6,7,8,9,"'"],["CAPS",0,1,2,3,4,5,6,7,8,9,"⏎"],["⇧",0,1,2,3,4,5,6,7,8,"/","⇧"],["Ctrl","Cmd","`","=","Alt","⍽",0,"AltGr","\\","Fn","Ctrl"]],fullMapping:[["Esc","1","2","3","4","5","6","7","8","9","0","⌫"],["↹",0,1,2,3,4,5,6,7,8,9,10],["CAPS",0,1,2,3,4,5,6,7,8,9,"⏎"],["⇧",0,1,2,3,4,5,6,7,8,9,"⇧"],["Ctrl","Cmd",0,1,"Alt","⍽","AltGr",2,3,"Fn","Ctrl"]],rowStart:e=>0,keyWidth:(e,t)=>e==p.Bottom&&t==5?2:1,splitColumns:[6,6,6,6,6],leftHomeIndex:4,rightHomeIndex:7,staggerOffsets:[0,0,0,0],mainFingerAssignment:[[1,1,1,2,2,3,6,7,7,8,8,8],[0,0,1,2,3,3,6,6,7,8,9,9],[0,0,1,2,3,3,6,6,7,8,9,9],[0,0,1,2,3,3,6,6,7,8,9,9],[0,0,1,2,4,5,5,7,8,9,9]],hasAltFinger:(e,t)=>!1,singleKeyEffort:[[NaN,3,2,2,3,3,3,3,2,2,3,NaN],[NaN,1.5,1,1,1.5,1.5,1.5,1.5,1,1,1.5,2],[NaN,.2,.2,.2,.2,2,2,.2,.2,.2,.2,1.5],[NaN,1,1.5,1.5,1,2,2,1,1.5,1.5,1,NaN],[NaN,2,2,1.5,1.5,.2,1.5,1.5,2,2,NaN]],getSpecificMapping:e=>{}},mi={...Be,name:"Split Ortholinear with thumb keys",description:"The Ortholinear is especially popular with two-piece keyboards. This allows to position and rotate the two keyboard halves to make columns line up exactly with your finger's natural extension movement. Most split models include at least two thumb keys on each side that users can map to any function they want. The layout shown here is not too different to the Iris CE, a 56-key split keyboard which is incidentally the one that I used for coding this app. ",thirtyKeyMapping:[["Esc","1","2","3","4","5","6","7","8","9","0","⌫"],["↹",0,1,2,3,4,5,6,7,8,9,"-"],["CAPS",0,1,2,3,4,5,6,7,8,9,"'"],["⇧",0,1,2,3,4,5,6,7,8,9,"⇧"],["Ctrl","Cmd","=","\\","Alt","⍽","⏎","AltGr","Menu","`","Fn","Ctrl"]],thumb30KeyMapping:[["Esc","1","2","3","4","5","6","7","8","9","0","⌫"],["↹",0,1,2,3,4,5,6,7,8,9,"'"],["⇧",0,1,2,3,4,5,6,7,8,9,"⇧"],["Ctrl",0,1,2,3,4,5,6,7,8,"/","Ctrl"],["Cmd","","`","=","Alt","⍽","⏎",0,"AltGr","Menu","\\","Fn"]],fullMapping:[["Esc","1","2","3","4","5","6","7","8","9","0","⌫"],["↹",0,1,2,3,4,5,6,7,8,9,10],["CAPS",0,1,2,3,4,5,6,7,8,9,10],["⇧",0,1,2,3,4,5,6,7,8,9,"⇧"],["Ctrl","Cmd",0,"Alt",1,"⍽","⏎",2,"AltGr",3,"Fn","Ctrl"]],rowStart:e=>e==p.Bottom?1:0,keyWidth:(e,t)=>1,mainFingerAssignment:[[0,0,1,2,3,3,6,6,7,8,9,9],[0,0,1,2,3,3,6,6,7,8,9,9],[0,0,1,2,3,3,6,6,7,8,9,9],[0,0,1,2,3,3,6,6,7,8,9,9],[0,1,2,4,4,4,5,5,5,7,8,9]],singleKeyEffort:(e=>[...e.slice(0,4),[NaN,2,2,1.5,.2,.2,.2,.2,1.5,2,2,NaN]])(Be.singleKeyEffort),getSpecificMapping:e=>e.mappingSplitOrtho},pt=[["Esc","1","2","3","4","5","6","7","8","9","0",0,1],["↹",0,1,2,3,4,5,6,7,8,9,"⌫"],[0,1,2,3,4,5,6,7,8,9,10,11,12],["⇧",0,1,2,3,4,5,6,7,8,9,"⇧"],["Ctrl","Cmd","Alt",0,"⍽","⏎",1,"AltGr","Fn","Ctrl"]],nn={name:"Harmonic 13 Balance",description:"The Harmonic keyboard layout has a fully symmetric keyboard with only two key sizes to allow for flexible changes to the key mapping. Its regular row stagger allows for many keys to be comfortably typed by two fingers, which let's you intuitively avoid the awkward same-finger bigrams that make new key mappings feel so awkward. Using mostly square keys makes the board slightly narrower than an ANSI-based 60% keyboard, yet the hand home position is one key further apart, allowing for arms to relax and shoulders to open. This also puts a bit of typing load on the index fingers and less on the pinkies. ",thirtyKeyMapping:[["Esc","1","2","3","4","5","6","7","8","9","0","-","="],["↹",1,2,3,4,"`",5,6,7,8,9,"⌫"],[[-1,0],0,1,2,3,4,"\\",5,6,7,8,9,"'"],["⇧",0,1,2,3,4,9,5,6,7,8,"⇧"],["Ctrl","Cmd","Alt","[","⍽","⏎","]","AltGr","Fn","Ctrl"]],thumb30KeyMapping:[["Esc","1","2","3","4","5","6","7","8","9","0","[","]"],["↹",1,2,3,4,"=",5,6,7,8,9,"⌫"],[[-1,0],0,1,2,3,4,"`",5,6,7,8,9,"'"],["⇧",0,1,2,3,4,"/",5,6,7,8,"⇧"],["Ctrl","Cmd","Alt","\\","⍽","⏎",0,"AltGr","Fn","Ctrl"]],fullMapping:pt,rowStart:e=>e==p.Bottom?.5:0,keyWidth:(e,t)=>(e==p.Upper||e==p.Lower||e==p.Bottom)&&(t==0||t==pt[e].length-1)||e==p.Bottom&&(t==4||t==5)?1.5:1,splitColumns:[7,6,6,6,5],leftHomeIndex:4,rightHomeIndex:8,staggerOffsets:Q,mainFingerAssignment:[[1,1,2,2,3,3,3,6,6,7,7,8,8],[0,1,1,2,3,3,6,6,7,8,8,9],[0,0,1,2,3,3,6,6,6,7,8,9,9],[0,1,2,3,3,3,6,6,6,7,8,9],[0,1,2,4,4,5,5,7,8,9]],hasAltFinger:(e,t)=>(e==p.Upper||e==p.Lower)&&[1,2,3,8,9,10].includes(t),singleKeyEffort:[[3,3,2,2,2,3,3,3,2,2,2,3,3],[NaN,1.5,1,1,1.5,2,2,1.5,1,1,1.5,NaN],[1.5,.2,.2,.2,.2,2,3,2,.2,.2,.2,.2,1.5],[NaN,1.5,1.5,1.5,1.5,3,3,1.5,1.5,1.5,1.5,NaN],[NaN,NaN,NaN,1,.2,1,.2,NaN,NaN,NaN]],getSpecificMapping:e=>e.mappingHarmonic13wide};({...nn});function G(e){return e.reduce((t,n)=>t+n,0)}const Me=[["Esc","1","2","3","4","5","6","7","8","9","0",0,"⌫"],["↹",0,1,2,3,4,5,6,7,8,9,10,11,12],["¤",0,1,2,3,4,5,6,7,8,9,10,"⏎"],["⇧",0,1,2,3,4,5,6,7,8,9,"⇧"],["Ctrl","Cmd","Alt",0,"⌦","⍽",1,2,3,"Fn","Ctrl"]],_i={name:"Harmonic 14 Traditional",description:"With its large shift keys and Enter/Backspace/Caps in the same position as the ANSI keyboard, this Harmonic variant might be the easiest to get used to. We even put a central space bar for that special retro feeling. But other than that we keep the Harmonic virtues of a fully symmetric keyboard and only two key sizes for all remaining keys to allow for flexible changes to the key mapping. Its regular row stagger allows for many keys to be comfortably typed by two fingers, which let's you intuitively avoid the awkward same-finger bigrams that make new key mappings feel so awkward. Despite its size, the H14T is still one key unit narrower than an ANSI-based 60% keyboard, yet the hand home position is one key further apart, allowing for arms to relax and shoulders to open. This also puts a bit of typing load on the index fingers and less on the pinkies. ",thirtyKeyMapping:[["Esc","1","2","3","4","5","6","7","8","9","0","=","⌫"],["↹",0,1,2,3,4,"`",5,6,7,8,9,"'","\\"],["¤",0,1,2,3,4,"-",5,6,7,8,9,"⏎"],["⇧",0,1,2,3,4,9,5,6,7,8,"⇧"],["Ctrl","Cmd","Alt","[","⌦","⍽","AltGr","]","Menu","Fn","Ctrl"]],thumb30KeyMapping:[["Esc","1","2","3","4","5","6","7","8","9","0","`","⌫"],["↹",0,1,2,3,4,"=",5,6,7,8,9,"'","\\"],["¤",0,1,2,3,4,"[",5,6,7,8,9,"⏎"],["⇧",0,1,2,3,4,"]",5,6,7,8,"⇧"],["Ctrl","Cmd","Alt","/","⌦","⍽",0,"AltGr","Menu","Fn","Ctrl"]],fullMapping:Me,rowStart:e=>0,keyWidth:(e,t)=>(e==p.Number||e==p.Home)&&(t==0||t==Me[e].length-1)?1.5:e==p.Lower&&(t==0||t==Me[e].length-1)?2:e==p.Bottom?[1.5,1,1,1,1,3,1,1,1,1,1.5][t]:1,splitColumns:[7,7,6,6,5],leftHomeIndex:4,rightHomeIndex:8,staggerOffsets:Q,mainFingerAssignment:[[1,1,2,2,3,3,3,6,6,7,7,8,8],[1,0,1,1,2,3,3,6,6,7,8,8,9,8],[0,0,1,2,3,3,6,6,6,7,8,9,9],[0,1,2,3,3,3,6,6,6,7,8,9],[0,1,2,2,4,5,5,7,7,8,9]],hasAltFinger:(e,t)=>(e==p.Upper||e==p.Lower)&&[1,2,3,9,10,11].includes(t),singleKeyEffort:[[NaN,3,2,2,2,3,3,3,2,2,2,3,NaN],[3,1.5,1.5,1,1,1.5,2,2,1.5,1,1,1.5,1.5,3],[1,.2,.2,.2,.2,2,3,2,.2,.2,.2,.2,1],[1,1.5,1.5,1,1.5,3,3,1.5,1,1.5,1.5,1],[NaN,NaN,1.5,1,.2,1,.2,1,1.5,NaN,NaN]],getSpecificMapping:e=>e.mappingHarmonic14t},dt=[["Esc","1","2","3","4","5","6","7","8","9","0","⌫"],["↹",0,1,2,3,4,5,6,7,8,9,10,11],["⇧",0,1,2,3,4,5,6,7,8,9,"⇧"],["⇤",0,1,2,3,4,5,6,7,8,9,10,"⇥"],["Ctrl","Cmd","Alt",0,"⍽","⏎",1,"AltGr","Fn","Ctrl"]],gi={name:"Harmonic 13 MidShift",description:`The Harmonic MidShift variant will be interesting for all fans of the "angle mod" – moving the left-bottom row one step to the left to type it with the same staggering angle as the right bottom. The Harmonic MidShift solves the angle-mod dilemma of the far-away shift key by moving said key to the home row. It is also an excellent choice for people who have set up their split ortho keyboards with home-row shift keys. Generally, the Harmonic keyboard layout is fully symmetric with only two key sizes to allow for flexible changes to the key mapping. Its regular row stagger allows for many keys to be comfortably typed by two fingers, which let's you intuitively avoid the awkward same-finger bigrams that make new key mappings feel so awkward. Using mostly square keys makes the board slightly narrower than an ANSI-based 60% keyboard, yet the hand home position is one key further apart, allowing for arms to relax and shoulders to open. This also puts a bit of typing load on the index fingers and less on the pinkies. `,thirtyKeyMapping:[["Esc","1","2","3","4","5","6","7","8","9","0","⌫"],["↹",0,1,2,3,4,5,6,7,8,9,"'","="],["⇧",0,1,2,3,4,5,6,7,8,9,"⇧"],["⇤",0,1,2,3,4,"-",5,6,7,8,9,"⇥"],["Ctrl","Cmd","Alt","[","⍽","⏎","]","AltGr","Fn","Ctrl"]],thumb30KeyMapping:[["Esc","1","2","3","4","5","6","7","8","9","0","⌫"],["↹",0,1,2,3,4,5,6,7,8,9,"'","="],["⇧",0,1,2,3,4,5,6,7,8,9,"⇧"],["⇤",0,1,2,3,4,"\\",5,6,7,8,"/","⇥"],["Ctrl","Cmd","Alt","`","⍽","⏎",0,"AltGr","Fn","Ctrl"]],fullMapping:dt,rowStart:e=>0,keyWidth:(e,t)=>(e==p.Number||e==p.Home||e==p.Bottom)&&(t==0||t==dt[e].length-1)||e==p.Bottom&&[3,4,5,6].includes(t)?1.5:1,splitColumns:[6,6,6,7,5],leftHomeIndex:4,rightHomeIndex:7,staggerOffsets:Q,mainFingerAssignment:[[1,1,2,2,3,3,6,6,7,7,8,8],[1,0,0,1,2,3,6,6,7,8,9,9,8],[0,0,1,2,3,3,6,6,7,8,9,9],[0,0,1,2,3,3,3,6,6,7,8,9,9],[0,1,2,4,4,5,5,7,8,9]],hasAltFinger:(e,t)=>(e==p.Upper||e==p.Lower)&&[1,2,3,8,9,10].includes(t),singleKeyEffort:[[NaN,3,2,2,2,3,3,2,2,2,3,NaN],[NaN,1.5,1.5,1,1,1.5,2,1.5,1,1,1.5,1.5,3],[NaN,.2,.2,.2,.2,2,2,.2,.2,.2,.2,NaN],[3,1.5,1.5,1.5,1,1.5,3,1.5,1,1.5,1.5,1.5,3],[NaN,NaN,NaN,1.5,.2,.2,1.5,NaN,NaN,NaN]],getSpecificMapping:e=>{}},mt=[["Esc","1","2","3","4","5","6","7","8","9","0",0],["↹",0,1,2,3,4,5,6,7,8,"⌫"],[0,1,2,3,4,5,6,7,8,9,10,11],["⇧",0,1,2,3,4,5,6,7,8,"⇧"],["Ctrl","Cmd","Alt",0,"⍽","⏎",1,"AltGr","Fn","Ctrl"]],yi={name:"Harmonic 12 Mini",description:"The smallest variant of the Harmonic keyboard family is especially useful for use with tablets, mobile phones, or for people who mainly write plain English. But all ANSI punctuation is available on the AltGr layer. Like all Harmonic keyboard variants it has a fully symmetric shape with only two key sizes to allow for flexible changes to the key mapping. Its regular row stagger allows for many keys to be comfortably typed by two fingers, which let's you intuitively avoid the awkward same-finger bigrams that make new key mappings feel so awkward. The H12 is three full key units narrower than an ANSI-based 60% keyboard, yet has the same key dimensions and only 5 keys less. ",thirtyKeyMapping:[["Esc","1","2","3","4","5","6","7","8","9","0","-"],["↹",1,2,3,4,5,6,7,8,9,"⌫"],[[-1,0],0,1,2,3,4,5,6,7,8,9,"'"],["⇧",0,1,2,3,4,5,6,7,8,"⇧"],["Ctrl","Cmd","Alt","=","⍽","⏎",[-1,9],"AltGr","Fn","Ctrl"]],thumb30KeyMapping:[["Esc","1","2","3","4","5","6","7","8","9","0","="],["↹",1,2,3,4,5,6,7,8,9,"⌫"],[[-1,0],0,1,2,3,4,5,6,7,8,9,"'"],["⇧",0,1,2,3,4,5,6,7,8,"⇧"],["Ctrl","Cmd","Alt","/","⍽","⏎",0,"AltGr","Fn","Ctrl"]],fullMapping:mt,rowStart:e=>e==p.Bottom?.5:0,keyWidth:(e,t)=>(e==p.Upper||e==p.Lower||e==p.Bottom)&&(t==0||t==mt[e].length-1)||e==p.Bottom&&[4,5].includes(t)?1.5:1,splitColumns:[6,6,6,5,5],leftHomeIndex:4,rightHomeIndex:7,staggerOffsets:Q,mainFingerAssignment:[[1,1,2,2,3,3,6,6,7,7,8,8],[0,0,1,2,3,3,6,7,8,9,9],[0,0,1,2,3,3,6,6,7,8,9,9],[0,1,2,3,3,6,6,6,7,8,9],[0,1,2,4,4,5,5,7,8,9]],hasAltFinger:(e,t)=>(e==p.Upper||e==p.Lower)&&[1,2,3,8,9,10].includes(t),singleKeyEffort:[[NaN,3,2,2,2,3,3,2,2,2,3,3],[NaN,1.5,1,1,1.5,2,1.5,1,1,1.5,NaN],[1.5,.2,.2,.2,.2,2,2,.2,.2,.2,.2,1.5],[NaN,1.5,1.5,1,1.5,3,1.5,1,1.5,1.5,NaN],[NaN,NaN,NaN,1,.2,.2,1,NaN,NaN,NaN]],getSpecificMapping:e=>{}},_t=[["Esc","1","2","3","4","5","6","7","8","9","0",0,1,2],["↹",0,1,2,3,4,5,6,7,8,9,10,"⌫"],[0,1,2,3,4,5,6,7,8,9,10,11,12,13],["⇧",0,1,2,3,4,5,6,7,8,9,10,"⇧"],["Ctrl","Cmd","Alt",0,"⍽","⏎",1,2,"Fn","Ctrl"]],vi={name:"Harmonic 14 Macro",description:"Our biggest Harmonic variant, which has a lot of extra keys to use for navigation and other things. The Harmonic keyboard layout has a fully symmetric keyboard with only two key sizes to allow for flexible changes to the key mapping. Its regular row stagger allows for many keys to be comfortably typed by two fingers, which let's you intuitively avoid the awkward same-finger bigrams that make new key mappings feel so awkward. Using mostly square keys makes the board slightly narrower than an ANSI-based 60% keyboard, yet the hand home position is one key further apart, allowing for arms to relax and shoulders to open. This also puts a bit of typing load on the index fingers and less on the pinkies. ",thirtyKeyMapping:[["Esc","1","2","3","4","5","6","7","8","9","0","-","=","`"],["↹",1,2,3,4,"[","]",5,6,7,8,9,"⌫"],[[-1,0],0,1,2,3,4,"⇤","⇥",5,6,7,8,9,"'"],["⇧",0,1,2,3,4,"\\",9,5,6,7,8,"⇧"],["Ctrl","Cmd","Alt","⌦","⍽","⏎","AltGr","Menu","Fn","Ctrl"]],thumb30KeyMapping:[["Esc","1","2","3","4","5","6","7","8","9","0","=","`",""],["↹",1,2,3,4,"[","]",5,6,7,8,9,"⌫"],[[-1,0],0,1,2,3,4,"⇤","⇥",5,6,7,8,9,"'"],["⇧",0,1,2,3,4,"\\","/",5,6,7,8,"⇧"],["Ctrl","Cmd","Alt","⌦","⍽","⏎",0,"AltGr","Fn","Ctrl"]],fullMapping:_t,rowStart:e=>e==p.Bottom?.5:0,keyWidth:(e,t)=>(e==p.Upper||e==p.Lower||e==p.Bottom)&&(t==0||t==_t[e].length-1)?1.5:e==p.Bottom&&(t==4||t==5)?2:1,splitColumns:[7,6,7,7,5],leftHomeIndex:4,rightHomeIndex:9,staggerOffsets:Q,mainFingerAssignment:[[1,1,1,2,2,3,3,6,6,7,7,8,8,8],[1,0,1,2,3,3,6,6,6,7,8,8,9],[0,0,1,2,3,3,3,6,6,6,7,8,9,9],[0,1,2,3,3,3,3,6,6,6,7,8,9],[0,1,2,4,4,5,5,7,8,9]],hasAltFinger:(e,t)=>(e==p.Upper||e==p.Lower)&&[1,2,3,9,10,11].includes(t),singleKeyEffort:[[NaN,3,2,2,2,3,3,3,3,2,2,2,3,3],[1.5,1.5,1,1,1.5,2,3,2,1.5,1,1,1.5,1.5],[1,.2,.2,.2,.2,2,3,3,2,.2,.2,.2,.2,1],[1,1.5,1.5,1,1.5,3,3,3,1.5,1,1.5,1.5,1],[NaN,NaN,1.5,1,.2,.2,1,1.5,NaN,NaN]],getSpecificMapping:e=>{}};function rn(e,t,n){return t!=p.Home?!1:n<=e.leftHomeIndex&&n>e.leftHomeIndex-4||n>=e.rightHomeIndex&&n<e.rightHomeIndex+4}function ke(e,t){const n=e.getSpecificMapping(t);return n?qe(e.fullMapping,n,e.thirtyKeyMapping):t.mappingThumb30&&e.thumb30KeyMapping?qe(e.thumb30KeyMapping,["",...t.mappingThumb30]):qe(e.thirtyKeyMapping,["",...t.mapping30])}function on(e,t){return t.mapping30||t.mappingThumb30?!0:e.name.includes("ANSI")?!!(t.mappingAnsiWide&&t.mappingAnsi):!!e.getSpecificMapping(t)}const bi={"⌥":"AltGr","⇪":"CAPS","≡":"Menu",ƒ:"Fn"},wi="?",ki="_",qe=(e,t,n)=>e.map((i,r)=>i.map((o,a)=>{const l=Array.isArray(o)?t[r+o[0]][o[1]]:typeof o=="number"?t[r][o]:o;return!l||l==ki?"":l==wi?n?n[r][a]:"":bi[l]??l})),Ni=(e,t)=>e==t?S.SameFinger:we(e)==we(t)?S.SameHand:S.SwapHands;function Si(e,t,n){const i=Ai(e.mainFingerAssignment,n),r={};return t.forEach((o,a)=>{o.forEach((l,c)=>{if(!l||l==n[a][c])r[l]=S.SamePosition;else{let h=e.mainFingerAssignment[a][c];r[l]=Ni(h,i[l])}})}),r}function Ai(e,t){const n={};return e.forEach((i,r)=>{i.forEach((o,a)=>{const l=t[r][a];n[l]=o})}),n}const an=RegExp("^[a-z,.'/]$");function sn(e){const t={[S.SamePosition]:0,[S.SameFinger]:0,[S.SameHand]:0,[S.SwapHands]:0};return Object.entries(e).filter(([i,r])=>an.test(i)).map(([i,r])=>r).forEach(i=>{t[i]++}),t}function Je(e,t){const n=ke(e,t),i=ke(e,t.comparisonBase??Ce);return Si(e,n,i)}function ln(e){return e[S.SameFinger]*.5+e[S.SameHand]*1+e[S.SwapHands]*2}function cn(e){switch(e){case M.H14_Wide:return vi;case M.H14_Traditional:return _i;case M.H13_Wide:return nn;case M.H13_MidShift:return gi;case M.H12:return yi}}function Xe(e){switch(e.type){case F.ANSI:const t=e.wideAnsi?hi:j;return e.split?di(t):t;case F.Ortho:return e.split?mi:Be;case F.Harmonic:return cn(e.harmonicVariant)}}const gt=17,yt=.5;function Te(e,t,n){const i=ke(e,n),r=i.map((a,l)=>2*(yt+e.rowStart(l))+G(a.map((c,h)=>e.keyWidth(l,h))));let o=[];for(let a=0;a<5;a++){let l=yt+e.rowStart(a);t||(l+=(gt-r[a])/2),i[a].forEach((c,h)=>{t&&h==e.splitColumns[a]&&(l+=gt-r[a]);const d=e.mainFingerAssignment[a][h];o.push({label:c,row:a,col:h,colPos:l,finger:d,hasAltFinger:e.hasAltFinger(a,h)}),l+=e.keyWidth(a,h)})}return o}const xi=e=>Object.fromEntries(e.map(t=>[t.label,t])),Ci="↹⌫⇧⍽⏎¤⌥",un=e=>Ci.includes(e),Ti=["Esc","Tab","Backspace","CAPS","Delete","Enter","Space","Shift","Ctrl","Alt","Fn","Cmd","AltGr","Menu"],hn=e=>Ti.includes(e),fn=e=>(un(e)||hn(e))&&e!=="⍽"&&e!=="⏎"&&e!=="";function Hi(e,t){const n=pn(e,t);let i=0;return Object.entries(n).forEach(([r,o])=>{i+=o*le[r.toUpperCase()]}),Math.round(i)}function Ei(e,t){const n=pn(e,t),i={};return Object.entries(n).forEach(([r,o])=>{i[o]=(i[o]||0)+le[r.toUpperCase()]}),i}function pn(e,t){const n=ke(e,t),i={};return n.forEach((r,o)=>{r.forEach((a,l)=>{a&&le[a.toUpperCase()]&&(i[a]=e.singleKeyEffort[o][l])})}),i}const Mi=e=>s("div",{children:s("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 1700 500",class:"keyboard-svg",children:e.children})}),C=100,B=5,vt=17,bt=1;function qi({col:e,ribbonClass:t,backgroundClass:n,label:i,row:r,width:o,frequencyCircleRadius:a}){const l=e*C+B,c=r*C+B,h=un(i)?"keyboard-symbol":hn(i)?"key-name":"",d=h?s("text",{x:l+C*o/2,y:c+C/2,className:"key-label "+h,children:i}):s("text",{x:l+20,y:c+60,className:"key-label",children:i}),u=fn(i)?"command-key":n||(i?"":"unlabeled"),_=t&&s("rect",{class:"key-ribbon "+t,x:l+bt,y:c+vt,width:C*o-2*(B+bt),height:C-2*(B+vt)}),f=a&&s("circle",{cx:l+70,cy:c+30,r:a,className:"frequency-circle"});return s("g",{children:[s("rect",{className:"key-outline "+u,x:l,y:c,width:C*o-2*B,height:C-2*B}),_||f,d]})}function dn(e){return isNaN(e)?"":e<1?"home-key":"effort-"+e*10}const Li={[S.SamePosition]:void 0,[S.SameFinger]:"same-finger",[S.SameHand]:"same-hand",[S.SwapHands]:"swap-hands"},$i={[H.LThumb]:"lthumb",[H.RThumb]:"rthumb",[H.LIndex]:"lindex",[H.RIndex]:"rindex",[H.LMiddle]:"middy",[H.RMiddle]:"middy",[H.LRing]:"ringy",[H.RRing]:"ringy",[H.LPinky]:"pinky",[H.RPinky]:"pinky"};function Fi(e,t,n,i){const r=$i[e.mainFingerAssignment[t][n]],o=rn(e,t,n)?"home-key-border":fn(i)?"command-key-border":"";return r+" "+o}function Ii({layoutModel:e,keyPositions:t,mappingDiff:n,vizType:i}){return t.map(({label:r,row:o,col:a,colPos:l})=>{const c=e.keyWidth(o,a),h=i==w.LayoutKeyEffort?dn(e.singleKeyEffort[o][a]):i==w.LayoutFingering&&!isNaN(e.mainFingerAssignment[o][a])?Fi(e,o,a,r):rn(e,o,a)?"home-key":"",d=i==w.MappingDiff&&an.test(r)?Li[n[r]]:void 0;let u;return i==w.MappingFrequeny&&(u=Math.sqrt(le[r.toUpperCase()]/le.E)*C/2),s(qi,{label:r,backgroundClass:h,ribbonClass:d,row:o,col:l,width:c,frequencyCircleRadius:u},o+","+a)})}const mn={[g.SameRow]:"same-row",[g.NeighboringRow]:"neighboring-row",[g.OppositeRow]:"opposite-row",[g.OppositeLateral]:"opposite-lateral",[g.AltFinger]:"alt-finger",[g.SameFinger]:"same-finger-bigram",[g.OtherHand]:"",[g.InvolvesThumb]:""};function Oi({bigrams:e}){return e.map(t=>{const n=Math.abs(t.a.col-t.b.col);return t.draw&&s("line",{x1:C*(t.a.colPos+.5),y1:C*(t.a.row+.5-n/10),x2:C*(t.b.colPos+.5),y2:C*(t.b.row+.5),className:`bigram-line bigram-rank-${t.rank} `+mn[t.type]})})}function Pi({layoutModel:e,layoutSplit:t,keyPositions:n}){const i=n.filter(c=>c.row==p.Home&&c.col<=e.leftHomeIndex&&c.col>e.leftHomeIndex-4).map(c=>c.colPos),r=n.filter(c=>c.row==p.Home&&c.col>=e.rightHomeIndex&&c.col<e.rightHomeIndex+4).map(c=>c.colPos),o=t?[0,0,0,0]:[1,.5,0,-.5],a=o.map(c=>-c),l=e.staggerOffsets==Q?e.staggerOffsets.map(c=>-c):e.staggerOffsets;return s(E,{children:[s(de,{homePositions:i,staggerOffsets:o,className:"hand-stagger-line"}),s(de,{homePositions:r,staggerOffsets:a,className:"hand-stagger-line"}),s(de,{homePositions:i,staggerOffsets:e.staggerOffsets,className:"stagger-line"}),s(de,{homePositions:r,staggerOffsets:l,className:"stagger-line"})]})}function de({homePositions:e,staggerOffsets:t,className:n}){const i=[];return e.forEach(r=>{for(let o=0;o<t.length-1;o++)i.push(s("line",{x1:C*(r+.5+t[o]),y1:C*(o+.5),x2:C*(r+.5+t[o+1]),y2:C*(o+1.5),class:n},`${o},${r}`))}),i}var ce,k,Le,wt,Ne=0,_n=[],N=m,kt=N.__b,Nt=N.__r,St=N.diffed,At=N.__c,xt=N.unmount,Ct=N.__;function Ve(e,t){N.__h&&N.__h(k,e,Ne||t),Ne=0;var n=k.__H||(k.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function gn(e){return Ne=1,zi(vn,e)}function zi(e,t,n){var i=Ve(ce++,2);if(i.t=e,!i.__c&&(i.__=[n?n(t):vn(void 0,t),function(l){var c=i.__N?i.__N[0]:i.__[0],h=i.t(c,l);c!==h&&(i.__N=[h,i.__[1]],i.__c.setState({}))}],i.__c=k,!k.__f)){var r=function(l,c,h){if(!i.__c.__H)return!0;var d=i.__c.__H.__.filter(function(_){return!!_.__c});if(d.every(function(_){return!_.__N}))return!o||o.call(this,l,c,h);var u=i.__c.props!==l;return d.forEach(function(_){if(_.__N){var f=_.__[0];_.__=_.__N,_.__N=void 0,f!==_.__[0]&&(u=!0)}}),o&&o.call(this,l,c,h)||u};k.__f=!0;var o=k.shouldComponentUpdate,a=k.componentWillUpdate;k.componentWillUpdate=function(l,c,h){if(this.__e){var d=o;o=void 0,r(l,c,h),o=d}a&&a.call(this,l,c,h)},k.shouldComponentUpdate=r}return i.__N||i.__}function Ui(e,t){var n=Ve(ce++,3);!N.__s&&yn(n.__H,t)&&(n.__=e,n.u=t,k.__H.__h.push(n))}function Tt(e){return Ne=5,et(function(){return{current:e}},[])}function et(e,t){var n=Ve(ce++,7);return yn(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function ji(){for(var e;e=_n.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ye),e.__H.__h.forEach(Re),e.__H.__h=[]}catch(t){e.__H.__h=[],N.__e(t,e.__v)}}N.__b=function(e){k=null,kt&&kt(e)},N.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Ct&&Ct(e,t)},N.__r=function(e){Nt&&Nt(e),ce=0;var t=(k=e.__c).__H;t&&(Le===k?(t.__h=[],k.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(ye),t.__h.forEach(Re),t.__h=[],ce=0)),Le=k},N.diffed=function(e){St&&St(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(_n.push(t)!==1&&wt===N.requestAnimationFrame||((wt=N.requestAnimationFrame)||Ki)(ji)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Le=k=null},N.__c=function(e,t){t.some(function(n){try{n.__h.forEach(ye),n.__h=n.__h.filter(function(i){return!i.__||Re(i)})}catch(i){t.some(function(r){r.__h&&(r.__h=[])}),t=[],N.__e(i,n.__v)}}),At&&At(e,t)},N.unmount=function(e){xt&&xt(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{ye(i)}catch(r){t=r}}),n.__H=void 0,t&&N.__e(t,n.__v))};var Ht=typeof requestAnimationFrame=="function";function Ki(e){var t,n=function(){clearTimeout(i),Ht&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,35);Ht&&(t=requestAnimationFrame(n))}function ye(e){var t=k,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),k=t}function Re(e){var t=k;e.__c=e.__(),k=t}function yn(e,t){return!e||e.length!==t.length||t.some(function(n,i){return n!==e[i]})}function vn(e,t){return typeof t=="function"?t(e):t}function bn(e){const[t,n]=gn(e.checked??!1);return s("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s("input",{type:"checkbox",checked:t,onChange:r=>{var a;const o=r.target;n(o.checked),(a=e.onChange)==null||a.call(e,o.checked)}}),e.label]})}function Bi({wide:e,setWide:t}){return s(E,{children:s(bn,{label:"use wide key mapping",checked:e,onChange:t})})}function Ri({variant:e,setVariant:t}){return s("div",{children:[s(ie,{variant:M.H14_Wide,currentVariant:e,setVariant:t}),s(ie,{variant:M.H14_Traditional,currentVariant:e,setVariant:t}),s(ie,{variant:M.H13_Wide,currentVariant:e,setVariant:t}),s(ie,{variant:M.H13_MidShift,currentVariant:e,setVariant:t}),s(ie,{variant:M.H12,currentVariant:e,setVariant:t})]})}function ie({variant:e,currentVariant:t,setVariant:n}){return s("button",{className:"layout-options-button"+(e===t?" selected":""),onClick:()=>n(e),children:cn(e).name})}function Wi({appState:e}){const{layout:t,layoutModel:n,mapping:i,setLayout:r,mappingDiff:o,bigramMovements:a,vizType:l}=e,c=Te(n.value,t.value.split,i.value);return s("div",{children:[s(Di,{layout:t.value,setLayout:r}),s(Mi,{children:[s(Ii,{layoutModel:n.value,keyPositions:c,mappingDiff:o.value,vizType:l.value}),l.value==w.LayoutAngle&&s(Pi,{layoutModel:n.value,layoutSplit:t.value.split,keyPositions:c}),l.value==w.MappingBigrams&&s(Oi,{bigrams:a.value})]}),s(Qi,{state:e})]})}function Di({layout:e,setLayout:t}){const n=[F.ANSI,F.Harmonic,F.Ortho];return s("div",{className:"layout-top-bar-container",children:[s(Et,{}),n.map(i=>s(Gi,{layoutType:i,layoutName:Xe({...e,type:i}).name,currentLayout:e.type,setLayoutType:r=>t({...e,type:r})},i)),s(Et,{})]})}const Et=()=>s("div",{class:"blank"});function Gi({layoutType:e,layoutName:t,currentLayout:n,setLayoutType:i}){return s("div",{onClick:()=>i(e),children:s("button",{class:"top-bar-keyboard-tab-label"+(e===n?" selected":""),children:t})})}function Qi({state:e}){return s("div",{class:"layout-options-bar-container",children:[s(bn,{label:"split keyboard",checked:e.layout.value.split,onChange:t=>e.setLayout({...e.layout.value,split:t})}),s(Zi,{layoutOptions:e.layout.value,setLayoutOptions:e.setLayout})]})}function Zi({layoutOptions:e,setLayoutOptions:t}){switch(e.type){case F.ANSI:return s(Bi,{wide:e.wideAnsi,setWide:n=>t({...e,wideAnsi:n})});case F.Harmonic:return s(Ri,{variant:e.harmonicVariant,setVariant:n=>t({...e,harmonicVariant:n})})}return s(E,{})}const Yi=[["er",2052072],["ht",1898489],["eh",1537888],["in",1482841],["it",1174519],["an",1160613],["es",1140866],["en",1117760],["no",1085035],["at",1078956],["or",1008467],["de",970989],["ar",900364],["et",867532],["is",865616],["ot",829265],["st",818144],["al",783066],["el",778414],["fo",715152],["dn",683236],["as",639025],["em",622410],["ev",614406],["ah",613166],["gn",609666],["il",608463],["ou",595543],["ce",541925],["ir",520672],["nt",513099],["ac",497242],["mo",486632],["am",464918],["co",446348],["di",437925],["hi",436056],["ci",432789],["ae",430241],["lo",418246],["rt",408559],["su",396479],["tu",394595],["io",381612],["os",379887],["ll",366004],["ru",365178],["be",341384],["ow",340479],["im",339705],["ai",332112],["ep",330913],["ad",323467],["op",307668],["ch",305999],["fi",297511],["ei",293767],["eg",292820],["ho",286559],["ew",273679],["ap",266641],["nu",261965],["aw",253669],["iv",253061],["lu",251680],["do",250042],["ns",248282],["ly",242268],["gi",232759],["hw",231945],["ct",229371],["iw",223618],["ab",223489],["pr",219184],["rs",219101],["ee",217888],["ef",216742],["av",214800],["ag",200658],["ss",198092],["hs",195705],["cn",194777],["oy",186839],["dl",184573],["bu",175531],["bo",171736],["ek",171672],["ay",171298],["cu",165108],["dr",161623],["ey",160055],["go",159444],["cr",154113],["gr",150896],["oo",150459],["lp",145915],["bl",145021],["gh",142972],["pu",142888],["ps",142290],["ry",135298],["au",132392],["af",131877],["mu",130928],["ov",129918],["ex",128731],["fr",125599],["lt",120346],["ty",119961],["ls",116120],["gu",115420],["ik",115395],["mp",113149],["ck",111807],["tt",109168],["ip",106943],["bi",104613],["du",102352],["cl",100403],["nr",98356],["cs",97778],["mr",97108],["eu",96958],["ak",92439],["ms",85254],["kn",84459],["by",82632],["ds",81102],["ff",80306],["qu",74688],["sy",74284],["rr",71533],["ks",71286],["pp",69858],["fl",69856],["eo",69003],["my",68800],["br",67758],["ny",63686],["pt",63667],["fu",61906],["hr",59718],["ft",58382],["ko",58215],["lr",54152],["iu",54045],["bm",52417],["nw",50387],["ln",49562],["kr",46988],["mm",46014],["hu",45471],["nn",43639],["sw",42491],["gs",41380],["tw",41095],["cc",39762],["iz",39186],["hp",38639],["ao",38096],["px",36495],["dd",36400],["gl",36372],["ju",36006],["fn",35590],["tx",34391],["ez",32811],["rv",31828],["dy",31074],["eq",28789],["nv",28734],["ax",28244],["jo",27742],["ix",27256],["hy",26929],["rw",26633],["bs",26177],["ej",25775],["py",25302],["cy",24256],["gg",22215],["kl",21308],["iy",21015],["az",20853],["aj",20714],["lm",18587],["mn",18364],["mt",17221],["dg",17126],["lv",16876],["lw",16687],["cx",14219],["hn",13377],["gy",13113],["gt",12940],["fs",12139],["bj",11816],["dv",11796],["dm",11088],["bt",10330],["ox",10173],["oz",8120],["cp",8079],["bb",8041],["hm",8014],["aq",7463],["dw",7454],["hl",7240],["ku",7001],["dp",6460],["gm",6348],["np",6301],["dt",6218],["cm",6083],["bd",6043],["uy",5744],["iq",5665],["fy",5498],["dh",5441],["pv",5258],["wy",5211],["df",5040],["ky",4970],["qs",4853],["jn",4828],["ux",4748],["uz",4604],["bc",4590],["cg",4584],["hk",4521],["bn",4432],["fg",4359],["cd",4294],["bh",4287],["ij",3723],["bk",3690],["ii",3665],["fm",3521],["cf",3495],["sv",3419],["nq",3323],["fp",3242],["ww",3063],["tz",2899],["gp",2862],["vy",2790],["cq",2681],["aa",2655],["yz",2605],["zz",2600],["bv",2406],["kt",2302],["nx",2296],["kw",2226],["kp",2212],["tv",2143],["uv",2048],["fx",2033],["fh",1946],["fk",1937],["mv",1879],["pw",1764],["fw",1734],["nz",1733],["dx",1695],["qw",1686],["xy",1672],["dj",1658],["mw",1657],["rx",1637],["hx",1585],["gk",1578],["qr",1547],["bg",1542],["bp",1508],["bw",1470],["km",1452],["sx",1435],["xx",1417],["dk",1360],["lq",1347],["cv",1307],["lz",1262],["bf",1231],["mx",1067],["cw",986],["bx",984],["uw",947],["hz",932],["jp",866],["hv",853],["kk",764],["gw",760],["jm",753],["dq",705],["js",701],["sz",700],["vx",696],["lx",680],["jr",673],["gv",662],["yy",645],["fq",612],["rz",608],["oq",573],["jt",546],["hh",538],["jl",521],["cz",501],["hq",440],["qq",425],["fv",366],["gz",359],["bz",333],["cj",324],["uu",320],["dz",317],["fj",269],["kv",246],["wz",231],["mz",219],["wx",203],["jk",186],["qt",184],["qx",183],["kz",158],["jy",139],["pq",126],["vv",124],["mq",113],["pz",107],["jz",100],["bq",82],["kq",73],["hj",72],["vw",72],["jj",66],["gx",61],["kx",60],["vz",58]];function Ji(e,t){try{return lt(e.finger)||lt(t.finger)?g.InvolvesThumb:we(e.finger)!=we(t.finger)?g.OtherHand:e.finger==t.finger?e.hasAltFinger||t.hasAltFinger||(e.finger==H.LIndex||e.finger==H.RIndex)&&e.col!=t.col?g.AltFinger:g.SameFinger:Math.abs(e.col-t.col)>4?g.OppositeLateral:e.row==t.row?g.SameRow:Math.abs(e.row-t.row)==1?g.NeighboringRow:g.OppositeRow}catch(n){throw console.log(`Error in getBigramType: ${n}. a: ${e}, b: ${t}`),n}}const wn=40;function tt(e,t){const n=Yi,i=xi(e);return n.map(([[r,o],a],l)=>{if(!i[r])return console.log(`character ${r} not mapped for ${t}.`),null;if(!i[o])return console.log(`character ${o} not mapped for ${t}.`),null;const c=Ji(i[r],i[o]);return{a:i[r],b:i[o],frequency:a,rank:1+Math.floor(l/wn),type:c,draw:c!=g.OtherHand&&c!=g.InvolvesThumb}}).filter(r=>!!r)}function Xi(e,t){const n=tt(Te(e,!1,t),`bigramFrequencyByType for ${t.name} on ${e.name}`),i=G(n.map(o=>o.frequency)),r={};return n.forEach(o=>{r[o.type]=(r[o.type]||0)+o.frequency*1e3/i}),r}function Vi(e,t){try{const n=tt(Te(e,!1,t),`sumBigramScores for ${t.name} on ${e.name}`),i=G(n.map(o=>o.frequency)),r=n.map(o=>o.frequency*Ye[o.type]*1e3/i);return Math.round(G(r))}catch(n){console.log(`Error in sumBigramScores: ${n} for mapping ${t.name} on layout ${e.name}`);return}}function er({appState:e}){const t=tn.filter(n=>on(e.layoutModel.value,n));return s("table",{class:"mapping-list",children:[s("thead",{children:s("tr",{class:"mapping-list-header",children:[s("td",{children:"Mapping Name"}),s("td",{children:"Learnability Score"}),s("td",{children:["Typing Effort Score",s("br",{}),"(Single / Bigram)"]})]})}),s("tbody",{children:t.map(n=>s(tr,{mapping:n,layout:e.layoutModel.value,selectedMapping:e.mapping},n.techName))})]})}function tr({layout:e,mapping:t,selectedMapping:n}){const i=n.value.name===t.name;return s("tr",{class:"mapping-list-item"+(i?" selected":""),onClick:()=>n.value=t,children:[s("td",{children:s("button",{children:t.name})}),s("td",{children:nr(sn(Je(e,t)))}),s("td",{children:[Hi(e,t)," / ",Vi(e,t)]})]})}function nr(e){return`${ln(e)} (${e[1]}/${e[2]}/${e[3]})`}function ir(e,t){for(var n in t)e[n]=t[n];return e}function Mt(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var i in t)if(i!=="__source"&&e[i]!==t[i])return!0;return!1}function qt(e,t){this.props=e,this.context=t}(qt.prototype=new $).isPureReactComponent=!0,qt.prototype.shouldComponentUpdate=function(e,t){return Mt(this.props,e)||Mt(this.state,t)};var Lt=m.__b;m.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Lt&&Lt(e)};var rr=m.__e;m.__e=function(e,t,n,i){if(e.then){for(var r,o=t;o=o.__;)if((r=o.__c)&&r.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),r.__c(e,t)}rr(e,t,n,i)};var $t=m.unmount;function kn(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),e.__c.__H=null),(e=ir({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(i){return kn(i,t,n)})),e}function Nn(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(i){return Nn(i,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function $e(){this.__u=0,this.o=null,this.__b=null}function Sn(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function me(){this.i=null,this.l=null}m.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),$t&&$t(e)},($e.prototype=new $).__c=function(e,t){var n=t.__c,i=this;i.o==null&&(i.o=[]),i.o.push(n);var r=Sn(i.__v),o=!1,a=function(){o||(o=!0,n.__R=null,r?r(l):l())};n.__R=a;var l=function(){if(!--i.__u){if(i.state.__a){var c=i.state.__a;i.__v.__k[0]=Nn(c,c.__c.__P,c.__c.__O)}var h;for(i.setState({__a:i.__b=null});h=i.o.pop();)h.forceUpdate()}};i.__u++||32&t.__u||i.setState({__a:i.__b=i.__v.__k[0]}),e.then(a,a)},$e.prototype.componentWillUnmount=function(){this.o=[]},$e.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=kn(this.__b,n,i.__O=i.__P)}this.__b=null}var r=t.__a&&Ue(E,null,e.fallback);return r&&(r.__u&=-33),[Ue(E,null,t.__a?null:e.children),r]};var Ft=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};(me.prototype=new $).__a=function(e){var t=this,n=Sn(t.__v),i=t.l.get(e);return i[0]++,function(r){var o=function(){t.props.revealOrder?(i.push(r),Ft(t,e,i)):r()};n?n(o):o()}},me.prototype.render=function(e){this.i=null,this.l=new Map;var t=be(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},me.prototype.componentDidUpdate=me.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){Ft(e,n,t)})};var or=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,ar=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,sr=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,lr=/[A-Z0-9]/g,cr=typeof document<"u",ur=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};$.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty($.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var It=m.event;function hr(){}function fr(){return this.cancelBubble}function pr(){return this.defaultPrevented}m.event=function(e){return It&&(e=It(e)),e.persist=hr,e.isPropagationStopped=fr,e.isDefaultPrevented=pr,e.nativeEvent=e};var dr={enumerable:!1,configurable:!0,get:function(){return this.class}},Ot=m.vnode;m.vnode=function(e){typeof e.type=="string"&&function(t){var n=t.props,i=t.type,r={},o=i.indexOf("-")===-1;for(var a in n){var l=n[a];if(!(a==="value"&&"defaultValue"in n&&l==null||cr&&a==="children"&&i==="noscript"||a==="class"||a==="className")){var c=a.toLowerCase();a==="defaultValue"&&"value"in n&&n.value==null?a="value":a==="download"&&l===!0?l="":c==="translate"&&l==="no"?l=!1:c[0]==="o"&&c[1]==="n"?c==="ondoubleclick"?a="ondblclick":c!=="onchange"||i!=="input"&&i!=="textarea"||ur(n.type)?c==="onfocus"?a="onfocusin":c==="onblur"?a="onfocusout":sr.test(a)&&(a=c):c=a="oninput":o&&ar.test(a)?a=a.replace(lr,"-$&").toLowerCase():l===null&&(l=void 0),c==="oninput"&&r[a=c]&&(a="oninputCapture"),r[a]=l}}i=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=be(n.children).forEach(function(h){h.props.selected=r.value.indexOf(h.props.value)!=-1})),i=="select"&&r.defaultValue!=null&&(r.value=be(n.children).forEach(function(h){h.props.selected=r.multiple?r.defaultValue.indexOf(h.props.value)!=-1:r.defaultValue==h.props.value})),n.class&&!n.className?(r.class=n.class,Object.defineProperty(r,"className",dr)):(n.className&&!n.class||n.class&&n.className)&&(r.class=r.className=n.className),t.props=r}(e),e.$$typeof=or,Ot&&Ot(e)};var Pt=m.__r;m.__r=function(e){Pt&&Pt(e),e.__c};var zt=m.diffed;m.diffed=function(e){zt&&zt(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value)};const An=({text:e,wordLimit:t=20,showMoreText:n="Show more",showLessText:i="Show less",truncationDelay:r=300})=>{const[o,a]=gn(!1),l=Tt(!1),c=Tt(null),h=e.split(" "),d=h.length>t,u=h.slice(0,t).join(" ");Ui(()=>()=>{c.current!==null&&window.clearTimeout(c.current)},[]);const _=()=>{a(!o)};return s("div",{className:"truncated-text",onMouseEnter:()=>{l.current=!0,c.current!==null&&(window.clearTimeout(c.current),c.current=null)},onMouseLeave:()=>{l.current=!1,d&&o&&(c.current=window.setTimeout(()=>{l.current||a(!1),c.current=null},r))},children:o||!d?s(E,{children:[s("span",{children:e}),d&&s("button",{className:"toggle-text-button",onClick:_,children:i})]}):s(E,{children:[s("span",{children:[u,"..."]}),s("button",{className:"toggle-text-button",onClick:_,children:n})]})})};function mr({appState:e}){const t=e.layoutModel.value,n=e.mapping.value,i=e.vizType.value;return s("div",{children:[Bn(i)?s("div",{className:"layout-description",children:s(An,{text:t.description})}):s(gr,{mapping:n,layout:t}),s("hr",{}),s("div",{class:"visualization-details",children:_r(i,t,n)})]})}function _r(e,t,n){switch(e){case w.LayoutFingering:return s(yr,{layout:t});case w.LayoutAngle:return s("p",{children:["The ",s("span",{className:"hand-stagger-line",children:"green"})," line represents your hand's angle on the keyboard, assuming that you turn a split keyboard to get just the right straight angle. For the non-split keyboards the angle actually is more vertical for people sitting straight up and more tilted for people like me who spread their elbows on the desk. The ",s("span",{className:"stagger-line",children:"red"})," line shows the keyboad stagger which for ANSI always faces one-way because of the 0.25 step that would be 0.75 if one tried to reach the other way."]});case w.LayoutKeyEffort:return s(vr,{layout:t,mapping:n});case w.MappingDiff:return s(br,{diff:Je(t,n),mapping:n});case w.MappingFrequeny:return s("p",{children:"The area of each shown circle is proportional to how often each letter occurs in the average of all English texts. This frequency is used to calculate the single-key Typing Effort Score. Switch between this and the Single-Key Effort visualization to see if the most frequent letters are on the easiest keys."});case w.MappingBigrams:return s(wr,{layout:t,mapping:n});case w.MappingAltGr:return s(kr,{})}}function gr({mapping:e,layout:t}){const n=t.getSpecificMapping(e)?"specifically customized":e.mappingThumb30?"derived from the generic 30-key with thumb mapping":"derived from the generic 30-key without thumb mapping",i=e.sourceUrl,r=e.sourceLinkTitle??i;return s("div",{className:"mapping-summary",children:[s("p",{children:["The ",s("b",{children:e.name})," key mapping for the ",s("b",{children:t.name})," layout is ",s("i",{children:n}),"."]}),e.description&&s(An,{text:e.description}),i&&s("p",{children:["Source: ",s("a",{href:i,children:r})]})]})}function yr({layout:e}){return s("p",{children:["Some people will probably hit some of those keys with different fingers. Given the many bigram conflicts and general awkwardness of the ANSI layout and Qwerty mapping, it might not even be the same finger for every tap on the same key.",s("br",{}),"But however it might be, we need some base model for finger assignment to reason about the typing of bigrams, so we'll take this as a start."]})}function vr({layout:e,mapping:t}){const n=Ei(e,t),i=Math.round(G(Object.entries(n).map(([r,o])=>Number(r)*o)));return s("div",{children:[s("p",{children:"There is always some individual bias in determining how hard or easy each key on the board is to reach from the home position, but the differences are mostly in details, so that a resulting evaluation of letter frequency times key effort should not differ strongly enough to justify a change to the layout. This is especially true for casual layouts which strongly limit the variation in letter placement."}),s("p",{children:"The following legend shows the percentage of key strokes (according to English average letter frequency), that fall on each color of letter. I assigned an effort score for each color of letter. By multiplying frequency with the score and adding it all up, we get the total Typing Effort Score for single keys."}),s("div",{children:[s(re,{score:je,frequency:n[je],children:"Home position, including the thumb keys, if present."}),s(re,{score:ct,frequency:n[ct],children:"Upward move for long fingers is particularly easy."}),s(re,{score:ut,frequency:n[ut],children:"Most neighbors of home position keys."}),s(re,{score:ht,frequency:n[ht],children:["Several neighbors of home keys are inconvenient to reach, especially lateral movement of the index fingers and upward movement of the pinky fingers.",e.name.includes("ANSI")&&s("p",{class:"footnote",children:" On the ANSI layout for typists with classical training, this also affects the left lower row where the finger assignment goes against the natural direction of the hand/arm. (You can train yourself to use the better-suited finger for hitting the key, but the you'll have to retrain whenever you use an ortho board.)"})]}),s(re,{score:Ke,frequency:n[Ke],children:"Keys that aren't neighbors of home position keys."})]}),s("p",{children:s("b",{children:["Total: ",i]})})]})}function re({frequency:e,score:t,children:n}){return s("div",{children:[s("div",{class:"key-effort-legend-item "+dn(t),children:Math.round(e??0)}),"[Score: ",t.toFixed(1),"] ",n]})}function br({diff:e,mapping:t}){const n=sn(e),i=t.comparisonBase??Ce;return s("div",{children:[s("p",{children:["Here's how 26 letters and six prose punctuation characters are changed in this layout compared to well-known ",s("i",{children:i.name}),":"]}),s(_e,{count:n[S.SamePosition],description:"Keys unchanged.",counterClass:"unchanged"}),s(_e,{count:n[S.SameFinger],description:"Keys change on same finger. (0.5 LP)",counterClass:"same-finger"}),s(_e,{count:n[S.SameHand],description:"Keys change finger on same hand. (1.0 LP)",counterClass:"same-hand"}),s(_e,{count:n[S.SwapHands],description:"Keys swap hands. (2.0 LP)",counterClass:"swap-hands"}),s("p",{children:"We calculate the total learnability (or switchability) score of the mapping by deducting the specified amount of learning points (LP) for each type of change as listed above."}),s("p",{children:[s("b",{children:["Total Score: ",ln(n)]})," – Lower is better."]})]})}function _e({count:e,description:t,counterClass:n}){return s("div",{children:[s("div",{class:`diff-counter ${n}`,children:e}),t]})}function wr({layout:e,mapping:t}){const n=Xi(e,t),i=G(Object.entries(n).map(([r,o])=>Ye[Number(r)]*o));return s("div",{children:[s("p",{children:"Human hands on a keyboard can move fingers independently and usually will move the next finger to its key while the current key is being hit. Obviously this doesn't work when both keys are to be typed by the same finger or when both keys are to far away from each other. The bigram effort scores give extra penalties to key mappings which make this happen for letter pairs that occur very often together. Here are the added frequencies of each type of bigram and theirs score. Like for single-key effort, the weighted sum is the total Typing Effort Score for bigrams."}),s(z,{bigramType:g.SameFinger,frequency:n[g.SameFinger],children:"The worst thing to happen is having to use the same finger subsequently on different keys. We count this as highest effort."}),s(z,{bigramType:g.AltFinger,frequency:n[g.AltFinger],children:'When the keyboard layout makes it easy to type some keys with another finger, the single finger bottleneck can be avoided. (Maybe you noticed yourself typing "er", "cd", or "un" with two different fingers, although strict touchtyping rules assign the same finger to both keys.'}),s(z,{bigramType:g.SameRow,frequency:n[g.SameRow],children:"Two keys on the same row are so easy and fun to type, that I assign an effort rebate for this case."}),s(z,{bigramType:g.NeighboringRow,frequency:n[g.NeighboringRow],children:"Two keys on neighboring rows are no extra effort."}),s(z,{bigramType:g.OppositeRow,frequency:n[g.OppositeRow],children:"Two keys on opposite rows (upper and lower letter row) are awkward to type in sequence, because curling a finger moves the palm up and stretching a finger moves the palm down."}),s(z,{bigramType:g.InvolvesThumb,frequency:n[g.InvolvesThumb],children:"Bigrams where one letter is on a thumb key are not shown, because (most people's) thumbs move independently from the other fingers. (And we have at most one letter key per thumb. And the space key on the other thumb.)"}),s(z,{bigramType:g.OtherHand,frequency:n[g.OtherHand],children:"Bigrams typed with fingers of different hands aren't shown either. They make no trouble."}),s("p",{children:s("b",{children:["Total: ",Math.round(i)]})}),s("p",{class:"footnote",children:["Only the ",4*wn," most frequent bigrams are shown in the keyboard visualization, but all available data is used in the calculation of the total score. (Infrequent bigrams have a an inconsequential contribution.)"]})]})}function z({bigramType:e,frequency:t,children:n}){return s("div",{children:[s("div",{class:"bigram-effort-legend-item "+mn[e],children:Math.round(t??0)}),"[Score: ",Ye[e],"] ",n]})}function kr({}){return s(E,{children:[s("p",{children:"The US American keyboard mapping might be the only one that doesn't come with an AltGr layer. Even the UK English keyboards have it! This layer basically allows us to type a lot more characters. We can use it for characters that are on the traditional keyboards, but we rarely type them. And we can add some extra useful characters like ¢ or ‰ or the m-dash – I really use that one a lot."}),s("p",{children:["I think that all punctuation characters used in daily writing should be accessible via a direct key or Shift, while more rare characters can easily be moved to the AltGr layer. ",s("br",{}),"TODO: actually show an example mapping of the keys that some of the letter mappings omit."]})]})}var Nr=Symbol.for("preact-signals");function He(){if(P>1)P--;else{for(var e,t=!1;oe!==void 0;){var n=oe;for(oe=void 0,We++;n!==void 0;){var i=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&Tn(n))try{n.c()}catch(r){t||(e=r,t=!0)}n=i}}if(We=0,P--,t)throw e}}function Sr(e){if(P>0)return e();P++;try{return e()}finally{He()}}var y=void 0;function xn(e){var t=y;y=void 0;try{return e()}finally{y=t}}var oe=void 0,P=0,We=0,Se=0;function Cn(e){if(y!==void 0){var t=e.n;if(t===void 0||t.t!==y)return t={i:0,S:e,p:y.s,n:void 0,t:y,e:void 0,x:void 0,r:t},y.s!==void 0&&(y.s.n=t),y.s=t,e.n=t,32&y.f&&e.S(t),t;if(t.i===-1)return t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=y.s,t.n=void 0,y.s.n=t,y.s=t),t}}function T(e,t){this.v=e,this.i=0,this.n=void 0,this.t=void 0,this.W=t==null?void 0:t.watched,this.Z=t==null?void 0:t.unwatched}T.prototype.brand=Nr;T.prototype.h=function(){return!0};T.prototype.S=function(e){var t=this,n=this.t;n!==e&&e.e===void 0&&(e.x=n,this.t=e,n!==void 0?n.e=e:xn(function(){var i;(i=t.W)==null||i.call(t)}))};T.prototype.U=function(e){var t=this;if(this.t!==void 0){var n=e.e,i=e.x;n!==void 0&&(n.x=i,e.e=void 0),i!==void 0&&(i.e=n,e.x=void 0),e===this.t&&(this.t=i,i===void 0&&xn(function(){var r;(r=t.Z)==null||r.call(t)}))}};T.prototype.subscribe=function(e){var t=this;return Y(function(){var n=t.value,i=y;y=void 0;try{e(n)}finally{y=i}})};T.prototype.valueOf=function(){return this.value};T.prototype.toString=function(){return this.value+""};T.prototype.toJSON=function(){return this.value};T.prototype.peek=function(){var e=y;y=void 0;try{return this.value}finally{y=e}};Object.defineProperty(T.prototype,"value",{get:function(){var e=Cn(this);return e!==void 0&&(e.i=this.i),this.v},set:function(e){if(e!==this.v){if(We>100)throw new Error("Cycle detected");this.v=e,this.i++,Se++,P++;try{for(var t=this.t;t!==void 0;t=t.x)t.t.N()}finally{He()}}}});function ae(e,t){return new T(e,t)}function Tn(e){for(var t=e.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function Hn(e){for(var t=e.s;t!==void 0;t=t.n){var n=t.S.n;if(n!==void 0&&(t.r=n),t.S.n=t,t.i=-1,t.n===void 0){e.s=t;break}}}function En(e){for(var t=e.s,n=void 0;t!==void 0;){var i=t.p;t.i===-1?(t.S.U(t),i!==void 0&&(i.n=t.n),t.n!==void 0&&(t.n.p=i)):n=t,t.S.n=t.r,t.r!==void 0&&(t.r=void 0),t=i}e.s=n}function K(e,t){T.call(this,void 0),this.x=e,this.s=void 0,this.g=Se-1,this.f=4,this.W=t==null?void 0:t.watched,this.Z=t==null?void 0:t.unwatched}K.prototype=new T;K.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===Se))return!0;if(this.g=Se,this.f|=1,this.i>0&&!Tn(this))return this.f&=-2,!0;var e=y;try{Hn(this),y=this;var t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return y=e,En(this),this.f&=-2,!0};K.prototype.S=function(e){if(this.t===void 0){this.f|=36;for(var t=this.s;t!==void 0;t=t.n)t.S.S(t)}T.prototype.S.call(this,e)};K.prototype.U=function(e){if(this.t!==void 0&&(T.prototype.U.call(this,e),this.t===void 0)){this.f&=-33;for(var t=this.s;t!==void 0;t=t.n)t.S.U(t)}};K.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;e!==void 0;e=e.x)e.t.N()}};Object.defineProperty(K.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var e=Cn(this);if(this.h(),e!==void 0&&(e.i=this.i),16&this.f)throw this.v;return this.v}});function W(e,t){return new K(e,t)}function Mn(e){var t=e.u;if(e.u=void 0,typeof t=="function"){P++;var n=y;y=void 0;try{t()}catch(i){throw e.f&=-2,e.f|=8,nt(e),i}finally{y=n,He()}}}function nt(e){for(var t=e.s;t!==void 0;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,Mn(e)}function Ar(e){if(y!==this)throw new Error("Out-of-order effect");En(this),y=e,this.f&=-2,8&this.f&&nt(this),He()}function Z(e){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}Z.prototype.c=function(){var e=this.S();try{if(8&this.f||this.x===void 0)return;var t=this.x();typeof t=="function"&&(this.u=t)}finally{e()}};Z.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,Mn(this),Hn(this),P++;var e=y;return y=this,Ar.bind(this,e)};Z.prototype.N=function(){2&this.f||(this.f|=2,this.o=oe,oe=this)};Z.prototype.d=function(){this.f|=8,1&this.f||nt(this)};Z.prototype.dispose=function(){this.d()};function Y(e){var t=new Z(e);try{t.c()}catch(n){throw t.d(),n}return t.d.bind(t)}var qn,Fe,Ln=[];Y(function(){qn=this.N})();function J(e,t){m[e]=t.bind(null,m[e]||function(){})}function Ae(e){Fe&&Fe(),Fe=e&&e.S()}function $n(e){var t=this,n=e.data,i=Cr(n);i.value=n;var r=et(function(){for(var l=t,c=t.__v;c=c.__;)if(c.__c){c.__c.__$f|=4;break}var h=W(function(){var f=i.value.value;return f===0?0:f===!0?"":f||""}),d=W(function(){return!Array.isArray(h.value)&&!Kt(h.value)}),u=Y(function(){if(this.N=Fn,d.value){var f=h.value;l.__v&&l.__v.__e&&l.__v.__e.nodeType===3&&(l.__v.__e.data=f)}}),_=t.__$u.d;return t.__$u.d=function(){u(),_.call(this)},[d,h]},[]),o=r[0],a=r[1];return o.value?a.peek():a.value}$n.displayName="_st";Object.defineProperties(T.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:$n},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});J("__b",function(e,t){if(typeof t.type=="string"){var n,i=t.props;for(var r in i)if(r!=="children"){var o=i[r];o instanceof T&&(n||(t.__np=n={}),n[r]=o,i[r]=o.peek())}}e(t)});J("__r",function(e,t){if(t.type!==E){Ae();var n,i=t.__c;i&&(i.__$f&=-2,(n=i.__$u)===void 0&&(i.__$u=n=function(r){var o;return Y(function(){o=this}),o.c=function(){i.__$f|=1,i.setState({})},o}())),Ae(n)}e(t)});J("__e",function(e,t,n,i){Ae(),e(t,n,i)});J("diffed",function(e,t){Ae();var n;if(typeof t.type=="string"&&(n=t.__e)){var i=t.__np,r=t.props;if(i){var o=n.U;if(o)for(var a in o){var l=o[a];l!==void 0&&!(a in i)&&(l.d(),o[a]=void 0)}else o={},n.U=o;for(var c in i){var h=o[c],d=i[c];h===void 0?(h=xr(n,c,d,r),o[c]=h):h.o(d,r)}}}e(t)});function xr(e,t,n,i){var r=t in e&&e.ownerSVGElement===void 0,o=ae(n);return{o:function(a,l){o.value=a,i=l},d:Y(function(){this.N=Fn;var a=o.value.value;i[t]!==a&&(i[t]=a,r?e[t]=a:a?e.setAttribute(t,a):e.removeAttribute(t))})}}J("unmount",function(e,t){if(typeof t.type=="string"){var n=t.__e;if(n){var i=n.U;if(i){n.U=void 0;for(var r in i){var o=i[r];o&&o.d()}}}}else{var a=t.__c;if(a){var l=a.__$u;l&&(a.__$u=void 0,l.d())}}e(t)});J("__h",function(e,t,n,i){(i<3||i===9)&&(t.__$f|=2),e(t,n,i)});$.prototype.shouldComponentUpdate=function(e,t){var n=this.__$u,i=n&&n.s!==void 0;for(var r in t)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){var o=2&this.__$f;if(!(i||o||4&this.__$f)||1&this.__$f)return!0}else if(!(i||4&this.__$f)||3&this.__$f)return!0;for(var a in e)if(a!=="__source"&&e[a]!==this.props[a])return!0;for(var l in this.props)if(!(l in e))return!0;return!1};function Cr(e,t){return et(function(){return ae(e,t)},[])}var Tr=function(e){queueMicrotask(function(){queueMicrotask(e)})};function Hr(){Sr(function(){for(var e;e=Ln.shift();)qn.call(e)})}function Fn(){Ln.push(this)===1&&(m.requestAnimationFrame||Tr)(Hr)}function Er(e,t,n){const i=Xe(e);if(!on(i,n.value)){const r=n.value.name.toLowerCase();r.includes("thumby")&&!r.includes("colemak")?n.value=en:n.value=Vt}t.value=e}function Ut(e){return e==="0"?!1:e==="1"?!0:null}function Ie(e){if(!e)return null;const t=Number(e);return Number.isFinite(t)?t:null}function Mr(e){if(e){const t=tn.find(n=>n.name==e||n.techName==e);if(t)return t}return Ce}function qr(e,t,n){const i=new URLSearchParams;i.set("layout",e.type.toString()),i.set("mapping",t.value.techName||t.value.name),i.set("viz",n.value.toString()),i.set("split",e.split?"1":"0"),i.set("wide",e.wideAnsi?"1":"0"),i.set("harmonic",e.harmonicVariant.toString()),window.history.pushState(null,"","#"+i.toString())}function Lr(){const e=new URLSearchParams(window.location.hash.slice(1)),t=ae({type:Ie(e.get("layout"))??F.ANSI,split:Ut(e.get("split"))??!1,wideAnsi:Ut(e.get("wide"))??!1,harmonicVariant:Ie(e.get("harmonic"))??M.H13_Wide}),n=W(()=>Xe(t.value)),i=ae(Mr(e.get("mapping"))),r=ae(Ie(e.get("viz"))??w.LayoutFingering),o=W(()=>Je(n.value,i.value)),a=W(()=>tt(Te(n.value,t.value.split,i.value),`get bigrams for visualization of ${i.value.name} on ${n.value.name}`));return Y(()=>qr(t.value,i,r)),{layout:W(()=>t.value),setLayout:l=>Er(l,t,i),layoutModel:n,mapping:i,vizType:r,mappingDiff:o,bigramMovements:a}}const Oe=Lr();function $r(){return s(E,{children:[s(Wi,{appState:Oe}),s("hr",{}),s(Fr,{vizType:Oe.vizType}),s("hr",{}),s(Ir,{appState:Oe})]})}function Fr({vizType:e}){return s("div",{class:"visualization-switches",children:[s("div",{children:["Layout Visualizations:",s(R,{vizType:w.LayoutFingering,signal:e,children:"Fingering"}),s(R,{vizType:w.LayoutAngle,signal:e,children:"Angle"}),s(R,{vizType:w.LayoutKeyEffort,signal:e,children:"Single-Key Effort"})]}),s("div",{children:["Mapping Visualizations:",s(R,{vizType:w.MappingDiff,signal:e,children:"Learning"}),s(R,{vizType:w.MappingFrequeny,signal:e,children:"Letter Frequency"}),s(R,{vizType:w.MappingBigrams,signal:e,children:"Bigram Effort"})]})]})}function R({vizType:e,signal:t,children:n}){return s("button",{class:"viz-type-button"+(e===t.value?" selected":""),onClick:()=>t.value=e,children:n})}function Ir({appState:e}){return s("div",{class:"mapping-and-details-container",children:[s(er,{appState:e}),s(mr,{appState:e})]})}jn(s($r,{}),document.getElementById("app"));
